[
  {
    "__docId__": 0,
    "kind": "file",
    "name": "src/bin/cli.js",
    "content": "const { genesisBlock } = require('./../lib/blockchain');\r\nconst core = require('./../core');;\r\nconst block = genesisBlock();\r\nconsole.log(block.hash, Buffer(JSON.stringify(block)));\r\nswitch (process.argv[2]) {\r\n  case 'init':\r\n    const block = genesisBlock();\r\n    ipfs.dag.put(block, {cid: block.hash})\r\n    break;\r\n}\r\n",
    "static": true,
    "longname": "src/bin/cli.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1,
    "kind": "variable",
    "name": "genesisBlock",
    "memberof": "src/bin/cli.js",
    "static": true,
    "longname": "src/bin/cli.js~genesisBlock",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/bin/cli.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2,
    "kind": "variable",
    "name": "core",
    "memberof": "src/bin/cli.js",
    "static": true,
    "longname": "src/bin/cli.js~core",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/bin/cli.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 3,
    "kind": "variable",
    "name": "block",
    "memberof": "src/bin/cli.js",
    "static": true,
    "longname": "src/bin/cli.js~block",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/bin/cli.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 4,
    "kind": "file",
    "name": "src/controller.js",
    "content": "import EventEmitter from 'events';\nimport {createWatcher} from 'ip-monitor';\n\nclass Emitter extends EventEmitter {\n\tconstructor(ipfs) {\n\t\tsuper();\n    this.ipfs = ipfs;\n\t\t// bind methods\n\t\tthis._announceAddress = this._announceAddress.bind(this);\n\t\t// this._onBlockAdded = this._onBlockAdded.bind(this);\n\t\t// setup ip monitor\n\t\tthis._ipWatcher = createWatcher();\n\t\tthis._ipWatcher.on('IP:change', this._announceAddress);\n\n\t\tthis._ipWatcher.start();\n\n\t\tthis.on('block-added', () => {\n\n\t\t});\n\n\t\tthis.on('peer', () => {\n\t\t\tswitch (type) {\n\t\t\tcase 'added':\n\t\t\tcase 'removed':\n\t\t\t\t// notifyClient\n\t\t\t\tbreak;\n\t\t\tcase 'add':\n\t\t\t\t// add peer\n\t\t\tcase 'remove':\n\t\t\t\t// notifyClient\n\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync _announceAddress(oldIP, newIP) {\n    const peerinfo = await this.ipfs.id();\n\t\tconst address = `/ip4/${newIP}/tcp/4001/ipfs/${peerinfo.id}`;\n    global.multiAddress = address;\n\t\tif (oldIP !== newIP) this.ipfs.pubsub.publish('peer-added', new Buffer(JSON.stringify({id: peerinfo.id, address})));\n\t}\n\n\n}\n\nexport default ipfs => new Emitter(ipfs);\n",
    "static": true,
    "longname": "src/controller.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 5,
    "kind": "class",
    "name": "Emitter",
    "memberof": "src/controller.js",
    "static": true,
    "longname": "src/controller.js~Emitter",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false,
    "extends": [
      "events~EventEmitter"
    ]
  },
  {
    "__docId__": 6,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/controller.js~Emitter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/controller.js~Emitter#constructor",
    "access": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "ipfs",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 7,
    "kind": "member",
    "name": "ipfs",
    "memberof": "src/controller.js~Emitter",
    "static": false,
    "longname": "src/controller.js~Emitter#ipfs",
    "access": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 8,
    "kind": "member",
    "name": "_announceAddress",
    "memberof": "src/controller.js~Emitter",
    "static": false,
    "longname": "src/controller.js~Emitter#_announceAddress",
    "access": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 9,
    "kind": "member",
    "name": "_ipWatcher",
    "memberof": "src/controller.js~Emitter",
    "static": false,
    "longname": "src/controller.js~Emitter#_ipWatcher",
    "access": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 10,
    "kind": "method",
    "name": "_announceAddress",
    "memberof": "src/controller.js~Emitter",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/controller.js~Emitter#_announceAddress",
    "access": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "oldIP",
        "types": [
          "*"
        ]
      },
      {
        "name": "newIP",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 11,
    "kind": "function",
    "name": "controller",
    "memberof": "src/controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/controller.js~controller",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/controller.js",
    "importStyle": "controller",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "ipfs",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 12,
    "kind": "file",
    "name": "src/core.js",
    "content": "// import { initConnection } from './lib/network/secure-client-connection';\r\nimport { getUserConfig, debug, allowFailureUntillEnough, log, groupCollapsed } from './utils';\r\nimport bus from './lib/bus';\r\nimport { join } from 'path';\r\nimport './server/index';\r\nimport { connect, connectBootstrap } from './lib/network/peernet';\r\nimport { DAGChain } from './lib/dagchain/dagchain';\r\nimport { configPath, networkPath, network } from './params';\nimport ipfsdNode from 'ipfsd-node';\r\nimport { write } from 'crypto-io-fs';\nimport ipfsStar from './lib/network/ipfs-star'\n\r\nglobal.states = {\r\n  ready: false,\r\n  syncing: false,\r\n  connecting: false,\r\n  mining: false\r\n};\r\n\r\nexport const core = async ({ genesis }) => {\r\n\ttry {\r\n    const now = Date.now();\r\n    const config = await getUserConfig;\r\n    // const connection = await initConnection;\r\n    const secure_now = Date.now();\r\n    bus.emit('stage-one');\n    const ipfsd = await ipfsdNode({\n      bootstrap: network,\n      sharding: true,\n      relayHop: true,\n      flags: ['--enable-pubsub-experiment'],\n      repoPath: networkPath,\n      cleanup: false\n    });\n\n    // TODO: flags should be configurable @ start\r\n    const { ipfs, addresses } = await ipfsd.start();\n    await connectBootstrap();\n    const star = ipfsStar(addresses[0], ipfs.pubsub);\r\n\r\n    const ipfsd_now = Date.now();\r\n    process.on('SIGINT', async () => {\r\n      console.log(\"Caught interrupt signal\");\n      await star.stop();\r\n      await ipfsd.stop();\r\n      setTimeout(async () => {\r\n        process.exit();\r\n      }, 50);\r\n      //graceful shutdown\r\n    });\r\n    await connect();\r\n    const connection_now = Date.now();\r\n    bus.emit('stage-two');\r\n    groupCollapsed('Initialize', () => {\r\n      log(`secure-connection took: ${(secure_now - now) / 1000} seconds`);\r\n      log(`ipfs daemon startup took: ${(ipfsd_now - secure_now) / 1000} seconds`);\r\n      log(`peer connection took: ${(connection_now - ipfsd_now) / 1000} seconds`);\r\n      log(`total load prep took ${(Date.now() - now) / 1000} seconds`);\r\n    })\r\n    await write(configPath, JSON.stringify(config, null, '\\t'));\r\n    const chain = new DAGChain({ genesis, network, ipfs });\r\n    await chain.init();    \r\n\t} catch (e) {\r\n    if (e.code === 'ECONNREFUSED' || e.message && e.message.includes('cannot acquire lock')) {\r\n      // await cleanRepo();\r\n      console.log('retrying');\r\n      // return core({ genesis, network });\r\n    }\r\n\t\tconsole.error(`load-error::${e}`);\r\n    // process.exit()\r\n\t}\r\n}\r\n\r\nexport default core({genesis: false})\r\n",
    "static": true,
    "longname": "src/core.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 13,
    "kind": "function",
    "name": "core",
    "memberof": "src/core.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/core.js~core",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/core.js",
    "importStyle": "{core}",
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"genesis\": *}"
        ],
        "defaultRaw": {
          "genesis": null
        },
        "defaultValue": "{\"genesis\":null}"
      }
    ]
  },
  {
    "__docId__": 14,
    "kind": "file",
    "name": "src/ipfs-keep-alive.js",
    "content": "export const twelveHours = 43200000;\nexport default (published, ipfs, cb) => {\n  if (!ipfs) {\n    const IPFS = require('ipfs-api');\n    ipfs = new IPFS();\n  }\n\tconst aliveTimeout = () => {\n    setTimeout(async () => {\n      published = await ipfs.name.resolve(published['name']);\n      published = await ipfs.name.publish(published['value']);\n      if (cb) {\n        cb(null, published);\n      }\n      return aliveTimeout();\n\t\t}, twelveHours);\n  }\n  aliveTimeout();\n};\n",
    "static": true,
    "longname": "src/ipfs-keep-alive.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 15,
    "kind": "variable",
    "name": "twelveHours",
    "memberof": "src/ipfs-keep-alive.js",
    "static": true,
    "longname": "src/ipfs-keep-alive.js~twelveHours",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/ipfs-keep-alive.js",
    "importStyle": "{twelveHours}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 16,
    "kind": "function",
    "name": "ipfskeepalive",
    "memberof": "src/ipfs-keep-alive.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/ipfs-keep-alive.js~ipfskeepalive",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/ipfs-keep-alive.js",
    "importStyle": "ipfskeepalive",
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "published",
        "types": [
          "*"
        ]
      },
      {
        "name": "ipfs",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 17,
    "kind": "file",
    "name": "src/lib/bus.js",
    "content": "import EventEmitter from 'events';\n\nclass Emitter extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n\nexport default new Emitter();\n",
    "static": true,
    "longname": "src/lib/bus.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 18,
    "kind": "class",
    "name": "Emitter",
    "memberof": "src/lib/bus.js",
    "static": true,
    "longname": "src/lib/bus.js~Emitter",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/bus.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "pseudoExport": true,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false,
    "extends": [
      "events~EventEmitter"
    ]
  },
  {
    "__docId__": 19,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/lib/bus.js~Emitter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/bus.js~Emitter#constructor",
    "access": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 20,
    "kind": "variable",
    "name": "emitter",
    "memberof": "src/lib/bus.js",
    "static": true,
    "longname": "src/lib/bus.js~emitter",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/bus.js",
    "importStyle": "emitter",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "src/lib/bus.js~Emitter"
      ]
    }
  },
  {
    "__docId__": 21,
    "kind": "file",
    "name": "src/lib/ccp-block.js",
    "content": "import { getDifficulty } from '../utils';\nimport {isValid} from './../schemas';\nimport {trymore} from 'crypto-io-utils';\nimport {read} from 'crypto-io-fs';\nimport events from './bus';\nimport {validateTransactions, createRewardTransaction} from './transaction';\nimport {calculateBlockHash} from './hash';\nimport {BlockError, TransactionError} from './errors.js';\n\n\n/**\n * validate block\n *\n * @param {object} previousBlock\n * @param {object} block\n * @param {number} difficulty\n * @param {number} unspent\n */\nexport const validateBlock = (previousBlock, block, difficulty, unspent) => {\n\tif (!isValid('block', block)) throw BlockError('data');\n\tif (previousBlock.index + 1 !== block.index) throw BlockError('index');\n\tif (previousBlock.hash !== block.prevHash) throw BlockError('prevhash');\n\tif (calculateBlockHash(block) !== block.hash) throw BlockError('hash');\n\tif (blockDifficulty(block) > difficulty) throw BlockError('difficulty');\n\treturn validateTransactions(block.transactions, unspent);\n};\n\n/**\n * Create genesis block\n *\n * @return {object} {index, prevHash, time, transactions, nonce}\n */\nexport const genesisBlock = () => {\n\tconst block = {\n\t\tindex: 0,\n\t\tprevHash: '0',\n\t\ttime: Math.floor(new Date().getTime() / 1000),\n\t\ttransactions: [],\n\t\tnonce: 0\n\t};\n\tblock.hash = calculateBlockHash(block);\n\treturn block;\n};\n\n/**\n * Get hash difficulty\n *\n * @param {*} hash\n * @return {number}\n */\nexport const difficulty = (hash) => {\n\treturn parseInt(hash.substring(0, 8), 16);\n};\n\n/**\n * Get hash difficulty from block\n *\n * @param {*} hash\n * @return {number}\n */\nexport const blockDifficulty = ({hash}) => {\n\treturn difficulty(hash);\n};\n\n/**\n * Create new block\n *\n * @param transactions {array}\n * @param lastBlock {object}\n * @param address {string}\n * @return {index, prevHash, time, transactions, nonce}\n */\nexport const block = (transactions, lastBlock, address) => {\n\ttransactions = transactions.slice();\n\ttransactions.push(createRewardTransaction(address, lastBlock.index + 1));\n\tconst block = {\n\t\tindex: lastBlock.index + 1,\n\t\tprevHash: lastBlock.hash,\n\t\ttime: Math.floor(new Date().getTime() / 1000),\n\t\ttransactions,\n\t\tnonce: 0,\n\t};\n\tblock.hash = calculateBlockHash(block);\n\n\treturn block;\n};\nexport default block;\n",
    "static": true,
    "longname": "src/lib/ccp-block.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 22,
    "kind": "function",
    "name": "validateBlock",
    "memberof": "src/lib/ccp-block.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/ccp-block.js~validateBlock",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/ccp-block.js",
    "importStyle": "{validateBlock}",
    "description": "validate block",
    "lineNumber": 19,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "previousBlock",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "block",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "difficulty",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "unspent",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 23,
    "kind": "function",
    "name": "genesisBlock",
    "memberof": "src/lib/ccp-block.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/ccp-block.js~genesisBlock",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/ccp-block.js",
    "importStyle": "{genesisBlock}",
    "description": "Create genesis block",
    "lineNumber": 33,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "object"
      ],
      "spread": false,
      "description": "{index, prevHash, time, transactions, nonce}"
    }
  },
  {
    "__docId__": 24,
    "kind": "function",
    "name": "difficulty",
    "memberof": "src/lib/ccp-block.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/ccp-block.js~difficulty",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/ccp-block.js",
    "importStyle": "{difficulty}",
    "description": "Get hash difficulty",
    "lineNumber": 51,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "hash",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 25,
    "kind": "function",
    "name": "blockDifficulty",
    "memberof": "src/lib/ccp-block.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/ccp-block.js~blockDifficulty",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/ccp-block.js",
    "importStyle": "{blockDifficulty}",
    "description": "Get hash difficulty from block",
    "lineNumber": 61,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "hash",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 26,
    "kind": "function",
    "name": "block",
    "memberof": "src/lib/ccp-block.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/ccp-block.js~block",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/ccp-block.js",
    "importStyle": "{block}",
    "description": "Create new block",
    "lineNumber": 73,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "transactions",
        "description": "{array}"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "lastBlock",
        "description": "{object}"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "address",
        "description": "{string}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "index, prevHash, time, transactions, nonce"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 27,
    "kind": "file",
    "name": "src/lib/dagchain/dagblock.js",
    "content": "import { DAGNode } from 'ipld-dag-pb';\nimport { validateTransactions, createRewardTransaction } from './../transaction';\r\nimport { hexFromMultihash, getDifficulty } from './../../utils';\r\nimport { isValid } from 'crypto-chain-validator';\r\nimport { BlockError } from '../errors';\r\nimport IPFS from 'ipfs-api';\r\nconst ipfs = new IPFS();\r\n\r\nconst calculateHash = async block => {\r\n  block = await createDAGNode(block);\r\n  return block.multihash.toString('hex').substring(4);\r\n}\r\n\r\nconst createDAGNode = ({index, prevHash, time, transactions, nonce}) => {\r\n  return new Promise((resolve, reject) => {\r\n    DAGNode.create(JSON.stringify({\r\n      index,\r\n      prevHash,\r\n      time,\r\n      transactions,\r\n      nonce\r\n    }), [], 'sha2-256', (error, dagNode) => {\r\n      if (error) {\r\n        return reject(error);\r\n      }\r\n      return resolve(dagNode)\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Create new block\r\n *\r\n * @param transactions {array}\r\n * @param previousBlock {object}\r\n * @param address {string}\r\n * @return {index, prevHash, time, transactions, nonce}\r\n */\r\nclass DAGBlock {\r\n\tconstructor(options) {\r\n    if (!options) return;\r\n\t\tif (typeof options === 'object' && !Buffer.isBuffer(options)) return this.newBlock(options);\r\n\t\telse return this.get(options);\r\n\t}\r\n\r\n\tasync newBlock({transactions, previousBlock, address}) {\r\n\t\ttransactions = transactions.slice();\r\n\t\ttransactions.push(createRewardTransaction(address, previousBlock.index + 1));\r\n\t\tthis.data = {\r\n\t\t\tindex: previousBlock.index + 1,\r\n\t\t\tprevHash: previousBlock.hash,\r\n\t\t\ttime: Math.floor(new Date().getTime() / 1000),\r\n\t\t\ttransactions,\r\n\t\t\tnonce: 0\r\n\t\t};\r\n\t\tthis.data.hash = await calculateHash(this.data);\r\n\t\treturn this.data;\r\n\t}\r\n\ttransformBlock({multihash, data}) {\r\n\t  data = JSON.parse(data.toString());\r\n\t  data.hash = hexFromMultihash(multihash);\r\n\t  return data;\r\n\t};\r\n\tasync get(hash) {\r\n\t\tthis.node = await ipfs.object.get(hash);\r\n\t\treturn this.transformBlock(this.node);\r\n\t}\r\n\tasync put(block) {\r\n\t\tthis.node = await createDAGNode(block || this.data);\r\n\t\treturn await ipfs.object.put(this.node);\r\n\t}\r\n}\r\n\n/**\n * validate block\n *\n * @param {object} previousBlock\n * @param {object} block\n * @param {number} difficulty\n * @param {number} unspent\n */\nconst validate = async (previousBlock, block, difficulty, unspent) => {\n\tif (!isValid('block', block)) throw BlockError('data');\n\tif (previousBlock.index + 1 !== block.index) throw BlockError('index');\n\tif (previousBlock.hash !== block.prevHash) throw BlockError('prevhash');\n\tif (await calculateHash(block) !== block.hash) throw BlockError('hash');\n\tif (getDifficulty(block.hash) > difficulty) throw BlockError('difficulty');\n\treturn validateTransactions(block.transactions, unspent);\n};\n\nexport {\n  DAGBlock,\n  validate,\n  calculateHash,\n  createDAGNode\n};\n",
    "static": true,
    "longname": "src/lib/dagchain/dagblock.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 28,
    "kind": "variable",
    "name": "ipfs",
    "memberof": "src/lib/dagchain/dagblock.js",
    "static": true,
    "longname": "src/lib/dagchain/dagblock.js~ipfs",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/dagchain/dagblock.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "ipfs-api~IPFS"
      ]
    }
  },
  {
    "__docId__": 29,
    "kind": "class",
    "name": "DAGBlock",
    "memberof": "src/lib/dagchain/dagblock.js",
    "static": true,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagblock.js",
    "importStyle": "{DAGBlock}",
    "description": "Create new block",
    "lineNumber": 39,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "transactions",
        "description": "{array}"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "previousBlock",
        "description": "{object}"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "address",
        "description": "{string}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "index, prevHash, time, transactions, nonce"
      ],
      "spread": false,
      "description": ""
    },
    "interface": false
  },
  {
    "__docId__": 30,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#constructor",
    "access": null,
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "options",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 31,
    "kind": "method",
    "name": "newBlock",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#newBlock",
    "access": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"transactions\": *, \"previousBlock\": *, \"address\": *}"
        ],
        "defaultRaw": {
          "transactions": null,
          "previousBlock": null,
          "address": null
        },
        "defaultValue": "{\"transactions\":null,\"previousBlock\":null,\"address\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 32,
    "kind": "member",
    "name": "data",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#data",
    "access": null,
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"index\": *, \"prevHash\": *, \"time\": *, \"transactions\": *, \"nonce\": *}"
      ]
    }
  },
  {
    "__docId__": 33,
    "kind": "method",
    "name": "transformBlock",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#transformBlock",
    "access": null,
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"multihash\": *, \"data\": *}"
        ],
        "defaultRaw": {
          "multihash": null,
          "data": null
        },
        "defaultValue": "{\"multihash\":null,\"data\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 34,
    "kind": "method",
    "name": "get",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#get",
    "access": null,
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "hash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 35,
    "kind": "member",
    "name": "node",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#node",
    "access": null,
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 36,
    "kind": "method",
    "name": "put",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#put",
    "access": null,
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "block",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 37,
    "kind": "member",
    "name": "node",
    "memberof": "src/lib/dagchain/dagblock.js~DAGBlock",
    "static": false,
    "longname": "src/lib/dagchain/dagblock.js~DAGBlock#node",
    "access": null,
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 38,
    "kind": "function",
    "name": "validate",
    "memberof": "src/lib/dagchain/dagblock.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/dagchain/dagblock.js~validate",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagblock.js",
    "importStyle": "{validate}",
    "description": "validate block",
    "lineNumber": 82,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "previousBlock",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "block",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "difficulty",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "unspent",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 39,
    "kind": "function",
    "name": "calculateHash",
    "memberof": "src/lib/dagchain/dagblock.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/dagchain/dagblock.js~calculateHash",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagblock.js",
    "importStyle": "{calculateHash}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "block",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 40,
    "kind": "function",
    "name": "createDAGNode",
    "memberof": "src/lib/dagchain/dagblock.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagblock.js~createDAGNode",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagblock.js",
    "importStyle": "{createDAGNode}",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"index\": *, \"prevHash\": *, \"time\": *, \"transactions\": *, \"nonce\": *}"
        ],
        "defaultRaw": {
          "index": null,
          "prevHash": null,
          "time": null,
          "transactions": null,
          "nonce": null
        },
        "defaultValue": "{\"index\":null,\"prevHash\":null,\"time\":null,\"transactions\":null,\"nonce\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 41,
    "kind": "file",
    "name": "src/lib/dagchain/dagchain-interface.js",
    "content": "import { config, median, multihashFromHex } from './../../utils';\r\nimport { validateTransaction } from './../transaction.js';\r\nimport { TransactionError } from './../errors.js';\r\nimport { DAGBlock, createDAGNode, validate } from './dagblock';\r\nimport { encode, decode } from 'bs58';\r\nimport { GENESISBLOCK } from '../../params';\r\nimport { resolvePeers } from '../network/peernet';\r\nimport IPFS from 'ipfs-api';\r\nconst ipfs = new IPFS();\n\r\nglobal.chain = global.chain || [\r\n  GENESISBLOCK\r\n];\r\n\r\nexport const chain = (() => global.chain)();\r\n\r\nexport const mempool = (() => [])();\r\n\r\n/**\r\n * Get the transactions for the next Block\r\n *\r\n * @return {object} transactions\r\n */\r\nexport const nextBlockTransactions = () => {\r\n\tconst unspent = getUnspent(false);\r\n\treturn mempool.filter((transaction) => {\r\n\t\ttry {\r\n\t\t\treturn validateTransaction(transaction, unspent);\r\n\t\t} catch (e) {\r\n\t\t\tif (! (e instanceof TransactionError)) throw e;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getTransactions = (withMempool = true) => {\r\n\tlet transactions = chain.reduce((transactions, block) => transactions.concat(block.transactions), []);\r\n\tif (withMempool) transactions = transactions.concat(mempool);\r\n\treturn transactions;\r\n};\r\n\r\nexport const getTransactionsForAddress = address => {\r\n\treturn getTransactions(false).filter(tx => tx.inputs.find(i => i.address === address) ||\r\n  tx.outputs.find(o => o.address === address));\r\n};\r\n\r\nexport const getUnspent = (withMempool = false) => {\r\n\tconst transactions = getTransactions(withMempool);\r\n\t// Find all inputs with their tx ids\r\n\tconst inputs = transactions.reduce((inputs, tx) => inputs.concat(tx.inputs), []);\r\n\r\n\t// Find all outputs with their tx ids\r\n\tconst outputs = transactions.reduce((outputs, tx) =>\r\n\t\toutputs.concat(tx.outputs.map(output => Object.assign({}, output, {tx: tx.id}))), []);\r\n\r\n\t// Figure out which outputs are unspent\r\n\tconst unspent = outputs.filter(output =>\r\n\t\ttypeof inputs.find(input => input.tx === output.tx && input.index === output.index && input.amount === output.amount) === 'undefined');\r\n\treturn unspent;\r\n};\r\nexport const getUnspentForAddress = address => {\r\n\treturn getUnspent(true).filter(u => u.address === address);\r\n};\r\nexport const getBalanceForAddress = address => {\r\n\treturn getUnspentForAddress(address).reduce((acc, u) => acc + u.amount , 0);\r\n};\r\nexport const difficulty = () => {\r\n\t// TODO: lower difficulty when transactionpool contain more then 500 tx ?\r\n\t// TODO: raise difficulty when pool is empty\r\n\t// get the last 128 blocks\r\n\tconst start = chain.length >= 128 ? (chain.length - 128) : 0;\r\n\tconst blocks = chain.slice(start, (chain.length - 1)).reverse();\r\n\tconst stamps = [];\r\n\tfor (var i = 0; i < blocks.length; i++) {\r\n\t\tif (blocks[i + 1]) {\r\n\t\t\tstamps.push(blocks[i].time - blocks[i + 1].time);\r\n\t\t}\r\n\t}\r\n\tif (stamps.length === 0) {\r\n\t\tstamps.push(10);\r\n\t}\r\n\tlet blocksMedian = median(stamps) || 10;\r\n  const offset = blocksMedian / 10\r\n   // offset for quick recovery\r\n\tif (blocksMedian < 9) {\r\n\t\tblocksMedian -= offset;\r\n\t} else if (blocksMedian > 11) {\r\n\t\tblocksMedian += offset;\r\n\t}\r\n  console.log(`Average Block Time: ${blocksMedian}`);\r\n  console.log(`Difficulty: ${10 / blocksMedian}`);\r\n\treturn 10000 / (10 / blocksMedian); // should result in a block every 10 seconds\r\n};\r\n\r\nexport const transformBlock = ({multihash, data}) => {\r\n  data = JSON.parse(data.toString());\r\n  data.hash = hashFromMultihash(multihash);\r\n  return data;\r\n};\r\n\r\n// TODO: global peerlist\r\nexport const longestChain = () => new Promise(async (resolve, reject) => {\r\n  try {\n    const peers = await resolvePeers();\n    // transform peers into valid ipfs addresses\r\n    const addrs = peers.map(({addr, peer}) => {\n      return {\n        addr: addr.toString(),\n        id: peer.toB58String()\n      }\n    });\r\n    // peers.push(id);\r\n    const stats = [];\r\n    for (const { addr, id } of addrs) {\r\n      try {\r\n        await ipfs.swarm.connect(`${addr.toString()}/ipfs/${id}`);\r\n        const ref = await ipfs.name.resolve(id);\r\n        const hash = ref.replace('/ipfs/', '');\r\n        // get chain stats for every peer\r\n        const stat = await ipfs.object.stat(hash);\r\n        // push chain length & hash\r\n        stats.push({height: stat.NumLinks - 1, hash: stat.Hash});\r\n      } catch (e) {\r\n        if (e.code === 'ECONNREFUSED') {\r\n          reject(e);\r\n        }\r\n        console.log(`Ignoring ${id}`)\r\n      }\r\n    }\r\n    // reduce to longest chain\r\n    // TODO: consider using canditates for validating\r\n    // canditates.push({hash, height})\r\n    // if c.height > p.height => newCanditatesSet ...\r\n    const stat = stats.reduce((p, c) => {\r\n      if (c.height > p.height || c.height === p.height) return c;\r\n      else return p;\r\n    }, {height: 0, hash: null});\r\n    resolve(stat);\r\n  } catch (e) {\r\n    reject(e);\r\n  }\r\n});\r\n\r\nexport const lastBlock = async () => {\r\n  const { hash, height } = await longestChain();\r\n  const { links } = await ipfs.object.get(hash); // retrieve links\r\n  // TODO: syncChain if needed\r\n  links.sort((a,b) => a.name - b.name); // sort index\r\n  // get block using its ipfs ref\r\n  return await new DAGBlock(encode(links[height].multihash));\r\n};\r\n\r\nexport const nextBlock = async address => {\r\n  const transactions = nextBlockTransactions();\r\n  const previousBlock = chain[chain.length - 1];\r\n  return await new DAGBlock({transactions, previousBlock, address});\r\n};\r\n\r\n/**\r\n * Create a new genesis block\r\n */\r\nexport const newGenesisDAGNode = async difficulty => {\r\n  let dagnode;\r\n  const block = {\r\n    index: 0,\r\n    prevHash: '0',\r\n    time: Math.floor(new Date().getTime() / 1000),\r\n    transactions: [],\r\n    nonce: 0\r\n  };\r\n\r\n  dagnode = await createDAGNode(block);\r\n  block.hash = dagnode.multihash.toString('hex').substring(4);\r\n  while (parseInt(block.hash.substring(0, 8), 16) >= difficulty) {\r\n    block.nonce++;\r\n    dagnode = await createDAGNode(block);\r\n    block.hash = dagnode.multihash.toString('hex').substring(4);\r\n  }\r\n  return dagnode;\r\n}\r\n",
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 42,
    "kind": "variable",
    "name": "ipfs",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~ipfs",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "ipfs-api~IPFS"
      ]
    }
  },
  {
    "__docId__": 43,
    "kind": "variable",
    "name": "chain",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~chain",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{chain}",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 44,
    "kind": "variable",
    "name": "mempool",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~mempool",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{mempool}",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 45,
    "kind": "function",
    "name": "nextBlockTransactions",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~nextBlockTransactions",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{nextBlockTransactions}",
    "description": "Get the transactions for the next Block",
    "lineNumber": 24,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "object"
      ],
      "spread": false,
      "description": "transactions"
    }
  },
  {
    "__docId__": 46,
    "kind": "function",
    "name": "getTransactions",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~getTransactions",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{getTransactions}",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "withMempool",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 47,
    "kind": "function",
    "name": "getTransactionsForAddress",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~getTransactionsForAddress",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{getTransactionsForAddress}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "address",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 48,
    "kind": "function",
    "name": "getUnspent",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~getUnspent",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{getUnspent}",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "withMempool",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 49,
    "kind": "function",
    "name": "getUnspentForAddress",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~getUnspentForAddress",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{getUnspentForAddress}",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "address",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 50,
    "kind": "function",
    "name": "getBalanceForAddress",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~getBalanceForAddress",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{getBalanceForAddress}",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "address",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 51,
    "kind": "function",
    "name": "difficulty",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~difficulty",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{difficulty}",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 52,
    "kind": "function",
    "name": "transformBlock",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~transformBlock",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{transformBlock}",
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"multihash\": *, \"data\": *}"
        ],
        "defaultRaw": {
          "multihash": null,
          "data": null
        },
        "defaultValue": "{\"multihash\":null,\"data\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 53,
    "kind": "function",
    "name": "longestChain",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~longestChain",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{longestChain}",
    "description": null,
    "lineNumber": 101,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 54,
    "kind": "function",
    "name": "lastBlock",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~lastBlock",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{lastBlock}",
    "description": null,
    "lineNumber": 143,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 55,
    "kind": "function",
    "name": "nextBlock",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~nextBlock",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{nextBlock}",
    "description": null,
    "lineNumber": 152,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "address",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 56,
    "kind": "function",
    "name": "newGenesisDAGNode",
    "memberof": "src/lib/dagchain/dagchain-interface.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/dagchain/dagchain-interface.js~newGenesisDAGNode",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain-interface.js",
    "importStyle": "{newGenesisDAGNode}",
    "description": "Create a new genesis block",
    "lineNumber": 161,
    "params": [
      {
        "name": "difficulty",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 57,
    "kind": "file",
    "name": "src/lib/dagchain/dagchain.js",
    "content": "import { DAGNode } from 'ipld-dag-pb';\r\nimport { decode, encode } from 'bs58';\r\nimport EventEmitter from 'events';\r\nimport { chain, difficulty, getUnspent, longestChain, lastBlock, newGenesisDAGNode } from './dagchain-interface';\r\nimport { DAGBlock, createDAGNode, validate } from './dagblock';\r\nimport { read, write } from 'crypto-io-fs';\r\nimport { join } from 'path';\r\nimport { genesis, network, genesisCID, localIndex, localCurrent, localDAGAddress, localDAGMultiaddress, networks } from './../../params';\r\nimport { debug, hashFromMultihash, multihashFromHex, succes, log } from './../../utils';\r\nimport bus from './../bus';\r\n// import ipfsKeepAlive from './../../ipfs-keep-alive';\r\n// import bitswap from 'ipfs-bitswap';\r\n// TODO: implement bitswap\r\n// export const ipfs = (() => new IPFS())();\r\n\r\nexport class DAGChain extends EventEmitter {\r\n  get link() {\r\n    return this.name.replace('/ipfs/', '')\r\n  }\r\n  get links() {\r\n    return this.node ? this.node.links : [];\r\n  }\r\n  get index() {\r\n    const links = [];\r\n    this.links.forEach(link => {\r\n\r\n      links[link.name] = link;\r\n    });\r\n    return links.length > 0 ? links : [];\r\n  }\r\n  constructor({ipfs}) {\r\n    super();\r\n    this.announceBlock = this.announceBlock.bind(this);\r\n\r\n    this.chain = chain;\r\n    this.ipfs = ipfs;\r\n  }\r\n\r\n  init() {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        await this.ipfs.pubsub.subscribe('block-added', this.announceBlock);\r\n        const { hash } = await longestChain();\r\n        this.name = hash || await localDAGMultiaddress();\r\n        this.node = await this.get(this.link);\r\n        log(`Running on the ${network} network`);\r\n        await this.loadChain();\r\n      } catch (error) {\r\n        // TODO: finishe the genesis module\r\n        if (genesis) {\r\n          log(`Creating genesis block on the ${network} network`);\r\n          await this.newDAGChain();\r\n        } else {\r\n          reject(error)\r\n        }\r\n      }\r\n    });\r\n  }\r\n  async resolve(name) {\r\n    return await this.ipfs.name.resolve(name, {recursive: true});\r\n  }\r\n\r\n  async get(multihash) {\r\n    return await this.ipfs.object.get(multihash);\r\n  }\r\n\r\n  async put(DAGNode) {\n    return await this.ipfs.object.put(DAGNode);\r\n  }\r\n\r\n  async pin(multihash) {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        await this.ipfs.pin.add(multihash);\r\n        resolve();\r\n      } catch (e) {\r\n        reject(e)\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * addLink\r\n   */\r\n  async addLink(multihash, link) {\r\n    const newDAGChain = await this.ipfs.object.patch.addLink(multihash, link);\n    return await this.publish(encode(newDAGChain.multihash));\r\n  }\r\n\r\n  async lastLink() {\r\n    try {\r\n      await this.sync();\r\n      const height = Number(this.links.length) - 1;\r\n      for (const link of this.links) {\r\n        if (Number(link.name) === height) {\r\n          return link.multihash;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('Sync Error::', e);\r\n    }\r\n  }\r\n  // TODO: decentralize\r\n  async lastBlock() {\r\n    const lastLink = await this.lastLink();\r\n    return await new DAGBlock(lastLink);\r\n  }\r\n\r\n  /**\r\n   * resolves to the latest chainObject\r\n   */\r\n  async sync() {\r\n    const { hash } = await longestChain();\r\n    this.name = hash || await localDAGMultiaddress();\r\n    this.node = await this.get(this.link);\r\n    return this.link;\r\n  }\r\n\r\n  async publish(multihash) {\r\n    const published = await this.ipfs.name.publish(multihash);\r\n    if (this.name) {\r\n      await this.sync();\r\n    }\r\n    await this.pin(published['value']);\r\n    return published['name']  // only needed when creating genesis block\r\n  }\n\n  async resolveBlocks(multihash, index) {\n    try {\n      let block = await new DAGBlock(encode(multihash));\n      if (block.index > index) {\n        await this.pin(encode(multihash)); // pin block locally\n        console.log(`added block: ${block.index}  ${block.hash}`);\n      }\n      chain[block.index] = block;\n      console.log(`loaded block: ${block.index}  ${block.hash}`);\n      if (block.prevHash && block.prevHash.length > 3) {\n        return this.resolveBlocks(Buffer.from(`1220${block.prevHash}`, 'hex'), index);\n      }\n      return;\n    } catch (e) {\n      console.error(e);\n    }\n  }\r\n\r\n  async syncChain() {\r\n    try {\r\n      bus.emit('syncing', true);\r\n      if (this.index) {\r\n        const { index, prevHash } = await this.localBlock();\n        const height = this.index.length - 1;\n        let syncCount = height - index;\n        const multihash = this.index[height].multihash;\n        log(`syncing ${syncCount} blocks`)\n        await this.resolveBlocks(multihash, index);\n        await this.updateLocals(multihash.toString('hex'), height, this.link);\n        await this.publish(this.link);\r\n      }\r\n      bus.emit('syncing', false);\r\n    } catch (e) {\r\n      console.error('syncChain', e);\r\n    }\r\n\r\n  }\r\n\r\n  async localBlock() {\r\n    try {\r\n      const CID = await read(localCurrent, 'string'); // read local chain state\r\n      const multihash = encode(new Buffer(CID, 'hex'));\r\n      const current = await this.get(multihash);\r\n      const { index } = JSON.parse(current.data.toString());\r\n      debug(`current local block CID ${CID}`);\r\n      debug(`current local dag: ${multihash}`);\r\n      return {\r\n        index,\r\n        multihash,\r\n        CID\r\n      }\r\n    } catch (e) {\r\n      const CID = await this.get(encode(new Buffer(genesisCID, 'hex')));\r\n      await write(localCurrent, CID.multihash.toString('hex'));\r\n      return await this.localBlock();\r\n    }\r\n  }\r\n\r\n  async loadChain() {\r\n    await this.syncChain();\r\n    bus.emit('ready', true);\r\n  }\r\n\r\n  addBlock(block) {\r\n    return new Promise(async (resolve, reject) => {\r\n      log(`add block: ${block.index}  ${block.hash}`);\r\n      chain[block.index] = block;\r\n      bus.emit('block-added', block);\r\n      await this.pin(multihashFromHex(block.hash)); // pin block locally\r\n      await this.updateLocals(`1220${block.hash}`, block.index, this.link);\n      try {\n        await this.publish(this.link);\n      } catch (e) {\n        console.warn(e);\n      }\r\n    });\r\n  }\r\n  // TODO: write using ipfs.files.write\r\n  writeLocals(CID, index, DAGAdress) {\r\n    return new Promise(async (resolve, reject) => {\r\n      await write(localIndex, JSON.stringify(index));\r\n      await write(localCurrent, CID);\r\n      await write(localDAGAddress, DAGAdress);\r\n      resolve();\r\n    });\r\n  }\r\n\r\n  updateLocals(CID, height, DAGAdress) {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const index = await read(localIndex, 'json');\r\n        index.push([height, CID]);\r\n        await this.writeLocals(CID, index, DAGAdress);\r\n      } catch (error) {\r\n        await this.writeLocals(CID, [[height, CID]], DAGAdress);\r\n      }\r\n      resolve();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initialize a new chain on the IPFS network\r\n   * Creates creates & saves the genesisBlock to IPFS, blocks are pinned so they aren't removeable on the local side.\r\n   *\r\n   * @param {object} block The genesis block to write\r\n   * @setup PART of Easy setup your own blockchain, more info URL...\r\n   */\r\n  async newDAGChain() {\r\n    try {\r\n      const genesisDAGNode = await newGenesisDAGNode(difficulty());\r\n      const block = await this.put(genesisDAGNode);\r\n      // await this.pin(encode(block.multihash));\r\n      const chainDAG = await this.ipfs.object.new('unixfs-dir');\r\n      const height = JSON.parse(genesisDAGNode.data.toString()).index;\r\n      const newDAGChain = await this.ipfs.object.patch.addLink(chainDAG.multihash, {name: height, size: block.size, multihash: block.multihash});\r\n      const CID = block.multihash.toString('hex'); // The CID as an base58 string\r\n      await this.updateLocals(CID, 0, encode(newDAGChain.multihash))\r\n      succes('genesisBlock created');\r\n      log(`genesisBlock: ${block.data.toString()}`);\r\n      log(`genesis: ${encode(block.data)}\\nCID:\\t${CID}`);\r\n      log(`DAGChain name ${encode(newDAGChain.multihash)}`);\r\n      return;\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  async updateLocalChain(block) {\r\n    const dagnode = await new DAGBlock().put(block);\r\n    await this.addLink(this.link, {name: block.index, size: dagnode.size, multihash: dagnode.multihash});\r\n    return;\r\n  }\r\n\r\n  // TODO: go with previous block instead off lastBlock\r\n  // TODO: validate on sync ...\r\n  async announceBlock({data, from}) {\r\n      const block = JSON.parse(data.toString());\r\n      try {\r\n        // const previousBlock = await lastBlock(); // test\r\n        await validate(chain[chain.length - 1], block, difficulty(), getUnspent());\n        // await this.sync();\r\n        await this.updateLocalChain(block);\r\n        this.addBlock(block); // add to chain\r\n      } catch (error) {\r\n        // TODO: remove publish invalid-block\r\n        this.ipfs.pubsub.publish('invalid-block', new Buffer.from(JSON.stringify(block)));\r\n        bus.emit('invalid-block', block);\r\n        return console.error(error);\r\n      }\r\n    }\r\n}\r\n",
    "static": true,
    "longname": "src/lib/dagchain/dagchain.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 58,
    "kind": "class",
    "name": "DAGChain",
    "memberof": "src/lib/dagchain/dagchain.js",
    "static": true,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/dagchain.js",
    "importStyle": "{DAGChain}",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false,
    "extends": [
      "events~EventEmitter"
    ]
  },
  {
    "__docId__": 59,
    "kind": "get",
    "name": "link",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#link",
    "access": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 60,
    "kind": "get",
    "name": "links",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#links",
    "access": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 61,
    "kind": "get",
    "name": "index",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#index",
    "access": null,
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 62,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#constructor",
    "access": null,
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"ipfs\": *}"
        ],
        "defaultRaw": {
          "ipfs": null
        },
        "defaultValue": "{\"ipfs\":null}"
      }
    ]
  },
  {
    "__docId__": 63,
    "kind": "member",
    "name": "announceBlock",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#announceBlock",
    "access": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 64,
    "kind": "member",
    "name": "chain",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#chain",
    "access": null,
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 65,
    "kind": "member",
    "name": "ipfs",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#ipfs",
    "access": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 66,
    "kind": "method",
    "name": "init",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#init",
    "access": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 67,
    "kind": "member",
    "name": "name",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#name",
    "access": null,
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 68,
    "kind": "member",
    "name": "node",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#node",
    "access": null,
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 69,
    "kind": "method",
    "name": "resolve",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#resolve",
    "access": null,
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 70,
    "kind": "method",
    "name": "get",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#get",
    "access": null,
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "multihash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 71,
    "kind": "method",
    "name": "put",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#put",
    "access": null,
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "DAGNode",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 72,
    "kind": "method",
    "name": "pin",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#pin",
    "access": null,
    "description": null,
    "lineNumber": 71,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "multihash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 73,
    "kind": "method",
    "name": "addLink",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#addLink",
    "access": null,
    "description": "addLink",
    "lineNumber": 85,
    "params": [
      {
        "name": "multihash",
        "types": [
          "*"
        ]
      },
      {
        "name": "link",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 74,
    "kind": "method",
    "name": "lastLink",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#lastLink",
    "access": null,
    "description": null,
    "lineNumber": 90,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 75,
    "kind": "method",
    "name": "lastBlock",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#lastBlock",
    "access": null,
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 76,
    "kind": "method",
    "name": "sync",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#sync",
    "access": null,
    "description": "resolves to the latest chainObject",
    "lineNumber": 112,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 77,
    "kind": "member",
    "name": "name",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#name",
    "access": null,
    "description": null,
    "lineNumber": 114,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 78,
    "kind": "member",
    "name": "node",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#node",
    "access": null,
    "description": null,
    "lineNumber": 115,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 79,
    "kind": "method",
    "name": "publish",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#publish",
    "access": null,
    "description": null,
    "lineNumber": 119,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "multihash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 80,
    "kind": "method",
    "name": "resolveBlocks",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#resolveBlocks",
    "access": null,
    "description": null,
    "lineNumber": 128,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "multihash",
        "types": [
          "*"
        ]
      },
      {
        "name": "index",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 81,
    "kind": "method",
    "name": "syncChain",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#syncChain",
    "access": null,
    "description": null,
    "lineNumber": 146,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 82,
    "kind": "method",
    "name": "localBlock",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#localBlock",
    "access": null,
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 83,
    "kind": "method",
    "name": "loadChain",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#loadChain",
    "access": null,
    "description": null,
    "lineNumber": 186,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 84,
    "kind": "method",
    "name": "addBlock",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#addBlock",
    "access": null,
    "description": null,
    "lineNumber": 191,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "block",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 85,
    "kind": "method",
    "name": "writeLocals",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#writeLocals",
    "access": null,
    "description": null,
    "lineNumber": 206,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "CID",
        "types": [
          "*"
        ]
      },
      {
        "name": "index",
        "types": [
          "*"
        ]
      },
      {
        "name": "DAGAdress",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 86,
    "kind": "method",
    "name": "updateLocals",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#updateLocals",
    "access": null,
    "description": null,
    "lineNumber": 215,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "CID",
        "types": [
          "*"
        ]
      },
      {
        "name": "height",
        "types": [
          "*"
        ]
      },
      {
        "name": "DAGAdress",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 87,
    "kind": "method",
    "name": "newDAGChain",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#newDAGChain",
    "access": null,
    "description": "Initialize a new chain on the IPFS network\nCreates creates & saves the genesisBlock to IPFS, blocks are pinned so they aren't removeable on the local side.",
    "lineNumber": 235,
    "unknown": [
      {
        "tagName": "@setup",
        "tagValue": "PART of Easy setup your own blockchain, more info URL..."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "block",
        "description": "The genesis block to write"
      }
    ]
  },
  {
    "__docId__": 88,
    "kind": "method",
    "name": "updateLocalChain",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#updateLocalChain",
    "access": null,
    "description": null,
    "lineNumber": 255,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "block",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 89,
    "kind": "method",
    "name": "announceBlock",
    "memberof": "src/lib/dagchain/dagchain.js~DAGChain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/dagchain/dagchain.js~DAGChain#announceBlock",
    "access": null,
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"data\": *, \"from\": *}"
        ],
        "defaultRaw": {
          "data": null,
          "from": null
        },
        "defaultValue": "{\"data\":null,\"from\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 90,
    "kind": "file",
    "name": "src/lib/dagchain/genesis.js",
    "content": "\r\n/**\r\n * Create a new genesis block\r\n */\r\nexport const newGenesisDAGNode = async difficulty => {\r\n  let dagnode;\r\n  const block = {\r\n    index: 0,\r\n    prevHash: '0',\r\n    time: Math.floor(new Date().getTime() / 1000),\r\n    transactions: [],\r\n    nonce: 0\r\n  };\r\n\r\n  dagnode = await createDAGNode(block);\r\n  block.hash = dagnode.multihash.toString('hex').substring(4);\r\n  while (parseInt(block.hash.substring(0, 8), 16) >= difficulty) {\r\n    block.nonce++;\r\n    dagnode = await createDAGNode(block);\r\n    block.hash = dagnode.multihash.toString('hex').substring(4);\r\n  }\r\n  return dagnode;\r\n}\r\n\r\nexport default (prevHash, time)\r\n",
    "static": true,
    "longname": "src/lib/dagchain/genesis.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 91,
    "kind": "function",
    "name": "newGenesisDAGNode",
    "memberof": "src/lib/dagchain/genesis.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/dagchain/genesis.js~newGenesisDAGNode",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/dagchain/genesis.js",
    "importStyle": "{newGenesisDAGNode}",
    "description": "Create a new genesis block",
    "lineNumber": 5,
    "params": [
      {
        "name": "difficulty",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 92,
    "kind": "file",
    "name": "src/lib/dagchain/keep-alive.js",
    "content": "import ipfsKeepAlive from './../../ipfs-keep-alive';\n\nipfsKeepAlive(params.dagchain);\n",
    "static": true,
    "longname": "src/lib/dagchain/keep-alive.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 93,
    "kind": "file",
    "name": "src/lib/errors.js",
    "content": "export const BlockError = text => new Error(`Invalid block: ${text}`);\n\n\nexport class TransactionError extends Error {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tset message(value) {\n\t\treturn `Invalid transaction ${value}`;\n\t}\n}\n\nexport const MinerWarning = text => new Error(`warning @Miner: ${text}`);\n",
    "static": true,
    "longname": "src/lib/errors.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 94,
    "kind": "function",
    "name": "BlockError",
    "memberof": "src/lib/errors.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/errors.js~BlockError",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/errors.js",
    "importStyle": "{BlockError}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 95,
    "kind": "class",
    "name": "TransactionError",
    "memberof": "src/lib/errors.js",
    "static": true,
    "longname": "src/lib/errors.js~TransactionError",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/errors.js",
    "importStyle": "{TransactionError}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false,
    "extends": [
      "Error"
    ]
  },
  {
    "__docId__": 96,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/lib/errors.js~TransactionError",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/errors.js~TransactionError#constructor",
    "access": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 97,
    "kind": "set",
    "name": "message",
    "memberof": "src/lib/errors.js~TransactionError",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/errors.js~TransactionError#message",
    "access": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 98,
    "kind": "function",
    "name": "MinerWarning",
    "memberof": "src/lib/errors.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/errors.js~MinerWarning",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/errors.js",
    "importStyle": "{MinerWarning}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 99,
    "kind": "file",
    "name": "src/lib/hash.js",
    "content": "import {SHA256} from 'crypto-js';\n\nconst _SHA256 = (object) => {\n\treturn SHA256(JSON.stringify(object)).toString();\n};\n\n/**\n * Generate block hash\n *\n * @param {object} block {index, prevHash, time, transactions, nonce}\n */\nexport const calculateBlockHash = (block) => {\n\tconst {index, prevHash, time, transactions, nonce} = block;\n\treturn _SHA256({index, prevHash, time, transactions, nonce});\n};\n\n/**\n * Generate transaction hash\n *\n * @param {object} transaction {id, type, inputs, outputs}\n */\nexport const transactionHash = (transaction) => {\n\tconst {id, type, inputs, outputs} = transaction;\n\treturn _SHA256({id, type, inputs, outputs});\n};\n\n/**\n * Generate transaction input hash\n *\n * @param {object} transactionInput {transaction, index, amount, address}\n */\nexport const transactionInputHash = (transactionInput) => {\n\tconst {transaction, index, amount, address} = transactionInput;\n\treturn _SHA256({transaction, index, amount, address});\n};\n",
    "static": true,
    "longname": "src/lib/hash.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 100,
    "kind": "function",
    "name": "_SHA256",
    "memberof": "src/lib/hash.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/hash.js~_SHA256",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/hash.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "object",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 101,
    "kind": "function",
    "name": "calculateBlockHash",
    "memberof": "src/lib/hash.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/hash.js~calculateBlockHash",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/hash.js",
    "importStyle": "{calculateBlockHash}",
    "description": "Generate block hash",
    "lineNumber": 12,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "block",
        "description": "{index, prevHash, time, transactions, nonce}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 102,
    "kind": "function",
    "name": "transactionHash",
    "memberof": "src/lib/hash.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/hash.js~transactionHash",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/hash.js",
    "importStyle": "{transactionHash}",
    "description": "Generate transaction hash",
    "lineNumber": 22,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "transaction",
        "description": "{id, type, inputs, outputs}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 103,
    "kind": "function",
    "name": "transactionInputHash",
    "memberof": "src/lib/hash.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/hash.js~transactionInputHash",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/hash.js",
    "importStyle": "{transactionInputHash}",
    "description": "Generate transaction input hash",
    "lineNumber": 32,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "transactionInput",
        "description": "{transaction, index, amount, address}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 104,
    "kind": "file",
    "name": "src/lib/miner.js",
    "content": "import { config, getDifficulty, hashLog, median } from './../utils';\r\nimport { BlockError, TransactionError, MinerWarning } from './errors';\r\nimport { StoreHandler } from 'crypto-store';\r\nimport { nextBlock, difficulty } from './dagchain/dagchain-interface';\r\nimport bus from './bus';\r\nimport { fork } from 'child_process';\r\nimport { join } from 'path';\r\nimport IPFS from 'ipfs-api'\r\nconst ipfs = new IPFS();\r\n\r\nexport default class Miner extends StoreHandler {\r\n\r\n  get donationAddress() {\r\n    return 'cpc';\r\n  }\r\n\r\n  constructor(address, intensity, autostart) {\r\n    // TODO: limit intensity when pool is empty\r\n    super();\r\n    this.workerPath = join(__dirname, 'miner-worker.js')\r\n    if (!address) {\r\n      MinerWarning('All profit will be donated until address is set');\r\n    }\r\n    this.address = address;\r\n    this.running = 0;\r\n\r\n\r\n    if (autostart) {\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * keep node(s) in sync\r\n   */\r\n  onBlockAdded() {\r\n    return new Promise((resolve, reject) => {\r\n      this._onBlockAdded = block => {\r\n        bus.removeListener('block-added', this._onBlockAdded);\r\n        bus.removeListener('invalid-block', this._onBlockInvalid);\r\n        this.mineStop()\r\n        resolve(block);\r\n      }\r\n      this._onBlockInvalid = block => {\r\n        bus.removeListener('block-added', this._onBlockAdded);\r\n        bus.removeListener('invalid-block', this._onBlockInvalid);\r\n        this.mineStop()\r\n        resolve(null);\r\n      }\r\n      bus.once('block-added', this._onBlockAdded);\r\n      bus.once('invalid-block', this._onBlockInvalid);\r\n    });\r\n  }\r\n\r\n\r\n  async start() {\r\n    // ipfs.pubsub.subscribe('invalid-block');\r\n    this.mining = true;\r\n    this.mine(Math.random().toString(36).slice(-11));\r\n  }\r\n\r\n  stop() {\r\n    this.mining = false;\r\n    this.mineStop();\r\n  }\r\n\r\n  async mine(job, lastValidBlock) {\r\n    const address = this.address || this.donationAddress;\r\n    const start = Date.now();\r\n    const {block, hashes, index} = await this.mineBlock(difficulty(), address, job);\r\n\r\n    if (hashes) {\r\n      const now = Date.now();\r\n      const seconds = (now - start) / 1000;\r\n      const rate = (hashes / seconds) / 1000;\r\n      bus.emit('hashrate', {uid: job, hashrate: (Math.round(rate * 100) / 100)});\r\n    }\r\n\r\n    if (block) {\r\n      ipfs.pubsub.publish('block-added', new Buffer(JSON.stringify(block)));\r\n      console.log(`${job}::Whooooop mined block ${block.index}`);\r\n      if (this.mining) {\r\n        await this.onBlockAdded();\r\n        this.mine(job, block);\r\n      }\r\n    } else {\r\n      console.log(`${job}::cancelled mining block ${index}`);\r\n      if (this.mining) this.mine(job);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Mine a block in separate process\r\n   *\r\n   * @param transactions Transactions list to add to the block\r\n   * @param lastBlock Last block in the blockchain\r\n   * @param difficulty Current difficulty\r\n   * @param address Addres for reward transaction\r\n   * @return {*}\r\n   */\r\n  async mineBlock(difficulty, address, job) {\r\n    const block = await nextBlock(address);\r\n    console.log(`${job}::Started mining block ${block.index}`);\r\n\r\n    return this.findBlockHash(block, difficulty);\r\n  }\r\n\r\n  /**\r\n   * Find block hash according to difficulty\r\n   *\r\n   * @param block\r\n   * @param difficulty\r\n   * @return {Promise}\r\n   */\r\n  findBlockHash (block, difficulty) {\r\n    return new Promise((resolve, reject) => {\r\n      const worker = fork(this.workerPath);\r\n      /*\r\n       * Create worker to find hash in separate process\r\n       */\r\n\r\n\r\n       /*\r\n        * Hadnle events to stop mining when needed\r\n        */\r\n      this.mineStop = () => {\r\n       removeListeners()\r\n       worker.kill('SIGINT')\r\n       resolve({block: null, hashCount: null, index: block.index});\r\n      }\r\n\r\n      // Listeners for stopping mining\r\n      const blockAddedListener = b => {\r\n        if (b.index >= block.index) this.mineStop()\r\n      }\r\n      const mineStopListener = b => this.mineStop\r\n      const removeListeners = () => {\r\n       bus.removeListener('block-added', blockAddedListener)\r\n       bus.removeListener('mine-stop', mineStopListener)\r\n      }\r\n      // If other process found the same block faster, kill current one\r\n      bus.once('block-added', blockAddedListener)\r\n      bus.once('mine-stop', mineStopListener)\r\n      // const result = await minerWorker({block, difficulty})\r\n      worker.on('message', (data) => {\r\n        removeListeners();\r\n\r\n        resolve({block: data.block, hashes: data.hashCount});\r\n        worker.kill('SIGINT');\r\n      })\r\n      worker.send({block, difficulty});\r\n\r\n    });\r\n  }\r\n\r\n}\r\n",
    "static": true,
    "longname": "src/lib/miner.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 105,
    "kind": "variable",
    "name": "ipfs",
    "memberof": "src/lib/miner.js",
    "static": true,
    "longname": "src/lib/miner.js~ipfs",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/miner.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "ipfs-api~IPFS"
      ]
    }
  },
  {
    "__docId__": 106,
    "kind": "class",
    "name": "Miner",
    "memberof": "src/lib/miner.js",
    "static": true,
    "longname": "src/lib/miner.js~Miner",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/miner.js",
    "importStyle": "Miner",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false,
    "extends": [
      "crypto-store~StoreHandler"
    ]
  },
  {
    "__docId__": 107,
    "kind": "get",
    "name": "donationAddress",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/miner.js~Miner#donationAddress",
    "access": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 108,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/miner.js~Miner#constructor",
    "access": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "address",
        "types": [
          "*"
        ]
      },
      {
        "name": "intensity",
        "types": [
          "*"
        ]
      },
      {
        "name": "autostart",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 109,
    "kind": "member",
    "name": "workerPath",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#workerPath",
    "access": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 110,
    "kind": "member",
    "name": "address",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#address",
    "access": null,
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 111,
    "kind": "member",
    "name": "running",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#running",
    "access": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 112,
    "kind": "method",
    "name": "onBlockAdded",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/miner.js~Miner#onBlockAdded",
    "access": null,
    "description": "keep node(s) in sync",
    "lineNumber": 36,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 113,
    "kind": "member",
    "name": "_onBlockAdded",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#_onBlockAdded",
    "access": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 114,
    "kind": "member",
    "name": "_onBlockInvalid",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#_onBlockInvalid",
    "access": null,
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 115,
    "kind": "method",
    "name": "start",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/miner.js~Miner#start",
    "access": null,
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 116,
    "kind": "member",
    "name": "mining",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#mining",
    "access": null,
    "description": null,
    "lineNumber": 58,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 117,
    "kind": "method",
    "name": "stop",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/miner.js~Miner#stop",
    "access": null,
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 118,
    "kind": "member",
    "name": "mining",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#mining",
    "access": null,
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 119,
    "kind": "method",
    "name": "mine",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/miner.js~Miner#mine",
    "access": null,
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "job",
        "types": [
          "*"
        ]
      },
      {
        "name": "lastValidBlock",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 120,
    "kind": "method",
    "name": "mineBlock",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/miner.js~Miner#mineBlock",
    "access": null,
    "description": "Mine a block in separate process",
    "lineNumber": 102,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "transactions",
        "description": "Transactions list to add to the block"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "lastBlock",
        "description": "Last block in the blockchain"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "difficulty",
        "description": "Current difficulty"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "address",
        "description": "Addres for reward transaction"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 121,
    "kind": "method",
    "name": "findBlockHash",
    "memberof": "src/lib/miner.js~Miner",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/miner.js~Miner#findBlockHash",
    "access": null,
    "description": "Find block hash according to difficulty",
    "lineNumber": 116,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "block",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "difficulty",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 122,
    "kind": "member",
    "name": "mineStop",
    "memberof": "src/lib/miner.js~Miner",
    "static": false,
    "longname": "src/lib/miner.js~Miner#mineStop",
    "access": null,
    "description": null,
    "lineNumber": 127,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 123,
    "kind": "file",
    "name": "src/lib/network/ipfs-mock.js",
    "content": "import IPFS from 'ipfs-api';\r\nconst ipfs = new IPFS();\n\r\nexport const config = {\r\n\tget: property => ipfs.config.get(property),\r\n\tset: (property, value) => ipfs.config.set(property, value),\r\n};\r\n\r\nexport const swarm = {\r\n\tpeers: () => ipfs.swarm.peers(),\r\n\tconnect: addresses => new Promise(async (resolve, reject) => {\r\n\t\ttry {\r\n      for (const addr of addresses) {\r\n        await ipfs.swarm.connect(addr);\r\n      }\r\n\r\n  \t\tresolve();\r\n    } catch (e) {\r\n      reject(e)\r\n    }\r\n\t})\r\n};\r\n\r\nexport const pubsub = {\r\n\tsubscribe: (channel, cb) => ipfs.pubsub.subscribe(channel, cb),\r\n\tpublish: (channel, cb) => ipfs.pubsub.publish(channel, cb)\r\n};\r\n\r\nexport const name = {\r\n\tresolve: multihash => ipfs.name.resolve(multihash),\r\n\tpublish: multihash => ipfs.name.publish(multihash)\r\n};\r\n\r\nexport const id = () => ipfs.id();\r\n\r\nexport default {\r\n\tid,\r\n\tswarm,\r\n\tconfig,\r\n\tpubsub\r\n};\r\n",
    "static": true,
    "longname": "src/lib/network/ipfs-mock.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 124,
    "kind": "variable",
    "name": "ipfs",
    "memberof": "src/lib/network/ipfs-mock.js",
    "static": true,
    "longname": "src/lib/network/ipfs-mock.js~ipfs",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/ipfs-mock.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "ipfs-api~IPFS"
      ]
    }
  },
  {
    "__docId__": 125,
    "kind": "variable",
    "name": "config",
    "memberof": "src/lib/network/ipfs-mock.js",
    "static": true,
    "longname": "src/lib/network/ipfs-mock.js~config",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/ipfs-mock.js",
    "importStyle": "{config}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"get\": *, \"set\": *}"
      ]
    }
  },
  {
    "__docId__": 126,
    "kind": "variable",
    "name": "swarm",
    "memberof": "src/lib/network/ipfs-mock.js",
    "static": true,
    "longname": "src/lib/network/ipfs-mock.js~swarm",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/ipfs-mock.js",
    "importStyle": "{swarm}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"peers\": *, \"connect\": *}"
      ]
    }
  },
  {
    "__docId__": 127,
    "kind": "variable",
    "name": "pubsub",
    "memberof": "src/lib/network/ipfs-mock.js",
    "static": true,
    "longname": "src/lib/network/ipfs-mock.js~pubsub",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/ipfs-mock.js",
    "importStyle": "{pubsub}",
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"subscribe\": *, \"publish\": *}"
      ]
    }
  },
  {
    "__docId__": 128,
    "kind": "variable",
    "name": "name",
    "memberof": "src/lib/network/ipfs-mock.js",
    "static": true,
    "longname": "src/lib/network/ipfs-mock.js~name",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/ipfs-mock.js",
    "importStyle": "{name}",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"resolve\": *, \"publish\": *}"
      ]
    }
  },
  {
    "__docId__": 129,
    "kind": "function",
    "name": "id",
    "memberof": "src/lib/network/ipfs-mock.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/network/ipfs-mock.js~id",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/ipfs-mock.js",
    "importStyle": "{id}",
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 130,
    "kind": "file",
    "name": "src/lib/network/ipfs-star.js",
    "content": "import { encode } from 'bs58';\nimport { netPrefix } from './../../params'\n// TODO: rename to client\nglobal.peerset = new Map();\n/**\n * removes peer from peerset\n */\nconst peerdisconnect = message => {\n  global.peerset.delete(message.from);\n}\n\n/**\n * removes peer from peerset\n */\nconst peerconnect = message => {\n  global.peerset.set(message.from, message.data.toString());\n}\n\n/**\n * @param {method} options.subscribe pubsub subscriber\n * @param {method} options.publish pubsub publisher\n */\nexport default (address, pubsub) => {\n\tif (!pubsub && !global.ipfs) throw Error('pubsub client not found');\n\telse if (!pubsub && global.ipfs) pubsub = global.ipfs.pubsub;\n\tconst {subscribe, publish, unsubscribe} = pubsub;\n  const peers = message => {\n    subscribe(encode(Buffer.from(`${netPrefix}peernet-peer-connect`)), peerconnect);\n    JSON.parse(message.data.toString()).forEach(peer => {\n      peerset.set(peer[0], peer[1]);\n    })\n  \tunsubscribe(encode(Buffer.from(`${netPrefix}peernet-peers`)), () => {});\n  };\n\tsubscribe(encode(Buffer.from(`${netPrefix}peernet-peers`)), peers);\n  subscribe(encode(Buffer.from(`${netPrefix}peernet-peer-disconnect`)), peerdisconnect);\n  // let the network know there is a new peer\n\tsetTimeout(function () {\n    publish(encode(Buffer.from(`${netPrefix}peernet`)), new Buffer(address));\n  }, 500);\n\treturn {\n\t\tstop: async () => {\n\t    publish(encode(Buffer.from(`${netPrefix}peernet-peer-disconnect`)), Buffer(address));\n\t\t},\n    peers: () => peerset\n\t};\n};\n",
    "static": true,
    "longname": "src/lib/network/ipfs-star.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 131,
    "kind": "function",
    "name": "peerdisconnect",
    "memberof": "src/lib/network/ipfs-star.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/network/ipfs-star.js~peerdisconnect",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/ipfs-star.js",
    "importStyle": null,
    "description": "removes peer from peerset",
    "lineNumber": 8,
    "params": [
      {
        "name": "message",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 132,
    "kind": "function",
    "name": "peerconnect",
    "memberof": "src/lib/network/ipfs-star.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/network/ipfs-star.js~peerconnect",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/ipfs-star.js",
    "importStyle": null,
    "description": "removes peer from peerset",
    "lineNumber": 15,
    "params": [
      {
        "name": "message",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 133,
    "kind": "function",
    "name": "ipfsstar",
    "memberof": "src/lib/network/ipfs-star.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/network/ipfs-star.js~ipfsstar",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/ipfs-star.js",
    "importStyle": "ipfsstar",
    "description": "",
    "lineNumber": 23,
    "params": [
      {
        "nullable": null,
        "types": [
          "method"
        ],
        "spread": false,
        "optional": false,
        "name": "options.subscribe",
        "description": "pubsub subscriber"
      },
      {
        "nullable": null,
        "types": [
          "method"
        ],
        "spread": false,
        "optional": false,
        "name": "options.publish",
        "description": "pubsub publisher"
      }
    ],
    "return": {
      "types": [
        "{\"stop\": *, \"peers\": *}"
      ]
    }
  },
  {
    "__docId__": 134,
    "kind": "file",
    "name": "src/lib/network/peernet.js",
    "content": "import { debug, fail, succes } from './../../utils';\r\nimport bus from './../bus';\r\nimport { join } from 'path';\r\nimport { seeds, signalServers } from '../../params';\r\nimport { DAGNode } from 'ipld-dag-pb';\r\nimport { encode } from 'bs58';\r\nconst { promisify } = require('util');\r\nimport ipfs from './ipfs-mock';\r\n\r\n// TODO: create bootstrap according peer reputation ...\r\nconst handleDefaultBootstrapAddresses = async addresses => {\r\n  try {\r\n    let bootstrap = await ipfs.config.get('Bootstrap');\r\n    // const peers = await ipfs.swarm.peers();\r\n    // peers.forEach(peer => console.log(peer.peer.toB58String()))\r\n    // addresses.forEach(address => !bootstrap.indexOf(address) )\r\n    for (const peer of addresses) {\r\n      for (const address of bootstrap) {\r\n        if (addresses.indexOf(address) === -1) {\r\n          const index = bootstrap.indexOf(address);\r\n          bootstrap = bootstrap.slice(index, 0);\r\n        }\r\n      }\r\n\r\n      for (const address of addresses) {\r\n        if (bootstrap.indexOf(address) === -1) {\r\n          bootstrap.push(address);\r\n        }\r\n      }\r\n    }\r\n\r\n    await ipfs.config.set('Bootstrap', bootstrap);\r\n    return 0;\r\n  } catch (error) {\r\n    return 1;\r\n  }\r\n}\r\n\r\nlet done = false;\r\nlet runs = 0;\r\nexport const resolvePeers = () => new Promise(resolve => {\r\n  if (runs === 5) {\r\n    debug('searched for peers but none found, returning empty array');\n    runs = 0;\r\n    return resolve([]);\r\n  }\r\n  const resolves = peers => {\r\n    done = true;\n    runs = 0;\r\n    resolve(peers);\r\n  }\r\n  ipfs.swarm.peers().then(peers => resolves(peers));\r\n  runs++;\r\n  if (!done) setTimeout(() => resolvePeers().then(peers => resolves(peers)), 1000);\r\n})\r\n\r\nexport const _connect = async addresses =>\r\n  new Promise(async (resolve, reject) => {\n    // TODO: ignore address after 5 times\r\n    try {\r\n      await ipfs.swarm.connect(addresses);\r\n      resolve();\r\n    } catch (e) {\r\n      fail(e.message);\r\n      debug('trying again');\r\n      return setTimeout(async () => await _connect(addresses).then(() => resolve()), 1000);\r\n    }\r\n  });\nexport const connectBootstrap = async addresses => {\n  bus.emit('connecting', true);\n  debug('connecting bootsrap peers');\n\n  await _connect(signalServers);\n\n  succes(`connected to ${signalServers.length} bootstrap peer(s)`);\n}\r\nexport const connect = (addresses = []) => new Promise(async (resolve, reject) => {\r\n  try {\r\n    bus.emit('connecting', true);\r\n    debug('connecting peers');\n    // await handleDefaultBootstrapAddresses(addresses);\r\n    const { id } = await ipfs.id();\r\n    // TODO: filter using peerrep\r\n    const peers = await resolvePeers();\n    // transform peers into valid ipfs addresses\n    const addrs = peers.map(({addr, peer}) => `${addr.toString()}/ipfs/${peer.toB58String()}`);\r\n    // if (peers && peers.length === 0) peers = addresses;\r\n\n    await _connect(addrs);\n    \r\n    succes(`connected to ${addrs.length} peer(s)`);\r\n\r\n    ipfs.pubsub.subscribe('peer-connected', event => {\r\n      // TODO: update reputations\r\n      if (event.from !== id) console.log(event); // announcepeer\r\n    });\r\n    ipfs.pubsub.publish('peer-connected', new Buffer(id));\r\n    bus.emit('connecting', false);\r\n    resolve();\r\n  } catch (e) {\r\n    reject(e)\r\n  }\r\n})\r\n",
    "static": true,
    "longname": "src/lib/network/peernet.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 135,
    "kind": "variable",
    "name": "promisify",
    "memberof": "src/lib/network/peernet.js",
    "static": true,
    "longname": "src/lib/network/peernet.js~promisify",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 136,
    "kind": "function",
    "name": "handleDefaultBootstrapAddresses",
    "memberof": "src/lib/network/peernet.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/network/peernet.js~handleDefaultBootstrapAddresses",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "addresses",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 137,
    "kind": "variable",
    "name": "done",
    "memberof": "src/lib/network/peernet.js",
    "static": true,
    "longname": "src/lib/network/peernet.js~done",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 138,
    "kind": "variable",
    "name": "runs",
    "memberof": "src/lib/network/peernet.js",
    "static": true,
    "longname": "src/lib/network/peernet.js~runs",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 139,
    "kind": "function",
    "name": "resolvePeers",
    "memberof": "src/lib/network/peernet.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/network/peernet.js~resolvePeers",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": "{resolvePeers}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 140,
    "kind": "function",
    "name": "_connect",
    "memberof": "src/lib/network/peernet.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/network/peernet.js~_connect",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": "{_connect}",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "addresses",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 141,
    "kind": "function",
    "name": "connectBootstrap",
    "memberof": "src/lib/network/peernet.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/lib/network/peernet.js~connectBootstrap",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": "{connectBootstrap}",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "addresses",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 142,
    "kind": "function",
    "name": "connect",
    "memberof": "src/lib/network/peernet.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/network/peernet.js~connect",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/peernet.js",
    "importStyle": "{connect}",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "addresses",
        "optional": true,
        "types": [
          "*[]"
        ],
        "defaultRaw": [],
        "defaultValue": "[]"
      }
    ]
  },
  {
    "__docId__": 143,
    "kind": "file",
    "name": "src/lib/network/secure-client-connection.js",
    "content": "import io from 'socket.io-client';\r\nimport EventEmitter from 'events';\r\nimport ecdh from 'crypto-ecdh';\r\nimport { exists, write } from 'crypto-io-fs';\r\nimport { seed, netKeyPath } from './../../params';\r\n// TODO: hardcoded swarm key?\r\n// TODO: replace with websocket\r\n\r\nexport const initConnection = new Promise((resolve, reject) => {\r\n  const socket = io(seed);\r\n\r\n  socket.on('handshake', pubKey => {\r\n    const pair = ecdh('hex');\r\n    pair.derive(pubKey);\r\n\r\n    // start a new secure connection using ECDH\r\n    new SecureClientConnection(socket, pair).on('connected', connection => resolve(connection));\r\n  });\r\n});\r\n\r\nclass SecureClientConnection extends EventEmitter {\r\n  constructor(socket, pair) {\r\n    super();\r\n    // declare properties\r\n    this.id = socket.id;\r\n    this.pair = pair;\r\n    this.socket = socket;\r\n    // bind methods\r\n    this.handshake = this.handshake.bind(this);\r\n    // init listeners & emitters\r\n    this.shake();\r\n  }\r\n\r\n  requestKey() {\r\n    return new Promise((resolve, reject) => {\r\n      this.socket.on('_request-key', key => {\r\n        resolve(key);\r\n      });\r\n      this.socket.emit('request-key');\r\n    });\r\n  }\r\n\r\n  async shake() {\r\n    this.socket.on('secure-connection', this.handshake);\r\n    this.socket.emit('_handshake', this.pair.public);\r\n  }\r\n\r\n  async handshake(cipher) {\r\n    const key = await this.pair.decrypt(cipher);\r\n    // get a new pair\r\n    const pair = ecdh('hex');\r\n    // encrypt our new key\r\n    cipher = await this.pair.encrypt(pair.public);\r\n    this.pair = pair;\r\n    this.pair.derive(key);\r\n\r\n    this.socket.on('network', async cipher => {\r\n      const address = await this.pair.decrypt(cipher);\r\n      if (!exists(netKeyPath)) {\r\n        cipher = await this.requestKey();\r\n        const key = await this.pair.decrypt(cipher);\r\n        await write(netKeyPath, key);\r\n      }\r\n      this.emit('connected', {address});\r\n    });\r\n    this.socket.on('address', data => console.log(data));\r\n    this.socket.emit('_secure-connection', cipher.toString());\r\n  }\r\n}\r\n",
    "static": true,
    "longname": "src/lib/network/secure-client-connection.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 144,
    "kind": "variable",
    "name": "initConnection",
    "memberof": "src/lib/network/secure-client-connection.js",
    "static": true,
    "longname": "src/lib/network/secure-client-connection.js~initConnection",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/network/secure-client-connection.js",
    "importStyle": "{initConnection}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "Promise"
      ]
    }
  },
  {
    "__docId__": 145,
    "kind": "class",
    "name": "SecureClientConnection",
    "memberof": "src/lib/network/secure-client-connection.js",
    "static": true,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/network/secure-client-connection.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false,
    "extends": [
      "events~EventEmitter"
    ]
  },
  {
    "__docId__": 146,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#constructor",
    "access": null,
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "socket",
        "types": [
          "*"
        ]
      },
      {
        "name": "pair",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 147,
    "kind": "member",
    "name": "id",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#id",
    "access": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 148,
    "kind": "member",
    "name": "pair",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#pair",
    "access": null,
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 149,
    "kind": "member",
    "name": "socket",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#socket",
    "access": null,
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 150,
    "kind": "member",
    "name": "handshake",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#handshake",
    "access": null,
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 151,
    "kind": "method",
    "name": "requestKey",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#requestKey",
    "access": null,
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 152,
    "kind": "method",
    "name": "shake",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#shake",
    "access": null,
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": []
  },
  {
    "__docId__": 153,
    "kind": "method",
    "name": "handshake",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#handshake",
    "access": null,
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "cipher",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 154,
    "kind": "member",
    "name": "pair",
    "memberof": "src/lib/network/secure-client-connection.js~SecureClientConnection",
    "static": false,
    "longname": "src/lib/network/secure-client-connection.js~SecureClientConnection#pair",
    "access": null,
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 155,
    "kind": "file",
    "name": "src/lib/networks.js",
    "content": "// https://en.bitcoin.it/wiki/List_of_address_prefixes\n// Dogecoin BIP32 is a proposed standard: https://bitcointalk.org/index.php?topic=409731\n\n/**\n * Main network\n * @return {messagePrefix, pubKeyHash, scriptHash, wif, bip32}\n */\nconst leofcoin = {\n\tmessagePrefix: '\\u0019Leofcoin Signed Message:',\n\tpubKeyHash: 48, // L\n\tscriptHash: 55, // P\n\twif: 63, // S\n\tbip32: { public: 33108450, private: 33107450 }\n};\n\n/**\n * Tesnet\n * @return {messagePrefix, pubKeyHash, scriptHash, wif, bip32}\n */\nconst olivia = {\n\tmessagePrefix: '\\u0019Olivia Signed Message:',\n\tpubKeyHash: 115, // o\n\tscriptHash: 118, // p\n\twif: 125, // s\n\tbip32: { public: 33108400, private: 33107350 }\n};\n\nconst bitcoin = {\n\tmessagePrefix: '\\x18Bitcoin Signed Message:\\n',\n\tbech32: 'bc',\n\tpubKeyHash: 0x00,\n\tscriptHash: 0x05,\n\twif: 0x80,\n\tbip32: {\n\t\tpublic: 0x0488b21e, private: 0x0488ade4\n\t}\n};\n\nconst testnet = {\n\tmessagePrefix: '\\x18Bitcoin Signed Message:\\n',\n\tbech32: 'tb',\n\tpubKeyHash: 0x6f,\n\tscriptHash: 0xc4,\n\twif: 0xef,\n\tbip32: {\n\t\tpublic: 0x043587cf,\n\t\tprivate: 0x04358394\n\t}\n};\n\nconst litecoin = {\n\tmessagePrefix: '\\x19Litecoin Signed Message:\\n',\n\tpubKeyHash: 0x30,\n\tscriptHash: 0x32,\n\twif: 0xb0,\n\tbip32: {\n\t\tpublic: 0x019da462,\n\t\tprivate: 0x019d9cfe\n\t}\n};\n\n/**\n * Our & supported networks\n * @return {leofcoin, olivia}\n */\nexport default {\n\t// main network\n\tleofcoin,\n\t// testnet\n\tolivia,\n\tbitcoin,\n\ttestnet,\n\tlitecoin\n};\n",
    "static": true,
    "longname": "src/lib/networks.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 156,
    "kind": "variable",
    "name": "leofcoin",
    "memberof": "src/lib/networks.js",
    "static": true,
    "longname": "src/lib/networks.js~leofcoin",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/networks.js",
    "importStyle": null,
    "description": "Main network",
    "lineNumber": 8,
    "return": {
      "nullable": null,
      "types": [
        "messagePrefix, pubKeyHash, scriptHash, wif, bip32"
      ],
      "spread": false,
      "description": ""
    },
    "type": {
      "types": [
        "{\"messagePrefix\": string, \"pubKeyHash\": number, \"scriptHash\": number, \"wif\": number, \"bip32\": *}"
      ]
    }
  },
  {
    "__docId__": 157,
    "kind": "variable",
    "name": "olivia",
    "memberof": "src/lib/networks.js",
    "static": true,
    "longname": "src/lib/networks.js~olivia",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/networks.js",
    "importStyle": null,
    "description": "Tesnet",
    "lineNumber": 20,
    "return": {
      "nullable": null,
      "types": [
        "messagePrefix, pubKeyHash, scriptHash, wif, bip32"
      ],
      "spread": false,
      "description": ""
    },
    "type": {
      "types": [
        "{\"messagePrefix\": string, \"pubKeyHash\": number, \"scriptHash\": number, \"wif\": number, \"bip32\": *}"
      ]
    }
  },
  {
    "__docId__": 158,
    "kind": "variable",
    "name": "bitcoin",
    "memberof": "src/lib/networks.js",
    "static": true,
    "longname": "src/lib/networks.js~bitcoin",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/networks.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"messagePrefix\": string, \"bech32\": string, \"pubKeyHash\": *, \"scriptHash\": number, \"wif\": number, \"bip32\": *}"
      ]
    }
  },
  {
    "__docId__": 159,
    "kind": "variable",
    "name": "testnet",
    "memberof": "src/lib/networks.js",
    "static": true,
    "longname": "src/lib/networks.js~testnet",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/networks.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"messagePrefix\": string, \"bech32\": string, \"pubKeyHash\": number, \"scriptHash\": number, \"wif\": number, \"bip32\": *}"
      ]
    }
  },
  {
    "__docId__": 160,
    "kind": "variable",
    "name": "litecoin",
    "memberof": "src/lib/networks.js",
    "static": true,
    "longname": "src/lib/networks.js~litecoin",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/networks.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"messagePrefix\": string, \"pubKeyHash\": number, \"scriptHash\": number, \"wif\": number, \"bip32\": *}"
      ]
    }
  },
  {
    "__docId__": 161,
    "kind": "file",
    "name": "src/lib/transaction.js",
    "content": "import { config } from './../utils';\nimport params from '../params';\nimport { isValid } from 'crypto-chain-validator';\nimport { TransactionError } from './errors.js';\nimport { transactionInputHash, transactionHash } from './hash.js';\nimport {chain, mempool} from './dagchain/dagchain';\nimport { randomBytes } from 'crypto';\nimport ecdsa from 'ecdsa';\nconst { sign, verify } = ecdsa;\nimport bs58 from 'bs58';\n/**\n * validate transaction\n *\n * @param transaction\n * @param unspent\n */\nexport const validateTransaction = (transaction, unspent) => {\n\tif (!isValid('transaction', transaction)) throw new TransactionError('Invalid transaction');\n\tif (transaction.hash !== transactionHash(transaction)) throw new TransactionError('Invalid transaction hash');\n\n\t// Verify each input signature\n\ttransaction.inputs.forEach(input => {\n\t\tif (!verifySignature(input.address, input.signature, transactionHash(input)))\n\t\t\tthrow new TransactionError('Invalid input signature');\n\t});\n\n\t// Check if inputs are in unspent list\n\ttransaction.inputs.forEach((input) => {\n\t\tif (! unspent.find(out => out.tx === input.tx && out.index === input.index)) { throw new TransactionError('Input has been already spent: ' + input.tx); }\n\t});\n\n\tif (transaction.reward) {\n\t\t// For reward transaction: check if reward output is correct\n\t\tif (transaction.outputs.length !== 1) throw new TransactionError('Reward transaction must have exactly one output');\n\t\tif (transaction.outputs[0].amount !== config.reward) throw new TransactionError(`Mining reward must be exactly: ${config.reward}`);\n\t} else {\n\t\t// For normal transaction: check if total output amount equals input amount\n\t\tif (transaction.inputs.reduce((acc, input) => acc + input.amount, 0) !==\n      transaction.outputs.reduce((acc, output) => acc + output.amount, 0)) { throw new TransactionError('Input and output amounts do not match'); }\n\t}\n\n\treturn true;\n};\n\n/**\n * validate transactions list for current block\n *\n * @param {array} transactions\n * @param unspent\n */\nexport const validateTransactions = (transactions, unspent) => {\n\tfor (const transaction of transactions) {\n\t\tvalidateTransaction(transaction, unspent);\n\t\tif (transactions.filter(transaction => transaction.reward).length !== 1)\n\t\t\tthrow new TransactionError('Transactions cannot have more than one reward');\n\t}\n};\n\n/**\n * Create transaction\n *\n * @param inputs\n * @param outputs\n * @param reward\n * @return {{id: string, reward: boolean, inputs: *, outputs: *, hash: string}}\n */\nconst newTransaction = (inputs, outputs, reward = false) => {\n\tconst tx = {\n\t\tid: randomBytes(32).toString('hex'),\n\t\ttime: Math.floor(new Date().getTime() / 1000),\n\t\treward,\n\t\tinputs,\n\t\toutputs,\n\t};\n\ttx.hash = transactionHash(tx);\n\n\treturn tx;\n};\n\nconst consensusSubsidy = height => {\n\tconst quarterlings = height / params.consensusSubsidyInterval;\n\tif (quarterlings >= 256) {\n\t\treturn 0;\n\t}\n\t//subsidy is lowered by 12.5 %, approx every year\n\tconst minus = quarterlings >= 1 ? (quarterlings * (params.reward / 256)) : 0;\n\treturn params.reward - minus;\n};\n\n/**\n * Create reward transaction for block mining\n *\n * @param {string} address\n * @return {id: string, reward: boolean, inputs: *, outputs: *, hash: string}\n */\nexport const createRewardTransaction = (address, height) => {\n\treturn newTransaction([], [{index: 0, amount: consensusSubsidy(height), address}], true);\n};\n\n/**\n * Sign transactionHash woth privateKey\n */\nconst signHash = (hash, privateKey) => {\n\treturn sign(Buffer.from(hash, 'hex'), Buffer.from(privateKey)).signature.toString('base64');\n};\n\nconst verifySignature = (address, signature, hash) => {\n\treturn verify(Buffer.from(hash, 'hex'), Buffer.from(signature, 'base64'), decode(address));\n};\n\n/**\n * Create and sign input\n *\n * @param transaction Based on transaction id\n * @param index Based on transaction output index\n * @param amount\n * @param wallet\n * @return {transaction, index, amount, address}\n */\nconst createInput = (tx, index, amount, wallet) => {\n\tconst input = {\n\t\ttx,\n\t\tindex,\n\t\tamount,\n\t\taddress: wallet.public,\n\t};\n\tinput.signature = signHash(transactionInputHash(input), wallet.private);\n\n\treturn input;\n};\n\n/**\n * Create a transaction\n *\n * @param wallet\n * @param toAddress\n * @param amount\n * @param unspent\n * @return {id, reward, inputs, outputs, hash,}\n */\nconst buildTransaction  = (wallet, toAddress, amount, unspent) => {\n\tlet inputsAmount = 0;\n\tconst inputsRaw = unspent.filter(i => {\n\t\tconst more = inputsAmount < amount;\n\t\tif (more) inputsAmount += i.amount;\n\t\treturn more;\n\t});\n\tif (inputsAmount < amount) throw new TransactionError('Not enough funds');\n\n\tconst inputs = inputsRaw.map(i => createInput(i.tx, i.index, i.amount, wallet));\n\n\t// Send amount to destination address\n\tconst outputs = [{index: 0, amount, address: toAddress}];\n\t// Send back change to my wallet\n\tif (inputsAmount - amount > 0) {\n\t\toutputs.push({index: 1, amount: inputsAmount - amount, address: wallet.public});\n\t}\n\n\treturn newTransaction(inputs, outputs);\n};\n",
    "static": true,
    "longname": "src/lib/transaction.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 162,
    "kind": "variable",
    "name": "sign",
    "memberof": "src/lib/transaction.js",
    "static": true,
    "longname": "src/lib/transaction.js~sign",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 163,
    "kind": "function",
    "name": "validateTransaction",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~validateTransaction",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": "{validateTransaction}",
    "description": "validate transaction",
    "lineNumber": 17,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "transaction",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "unspent",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 164,
    "kind": "function",
    "name": "validateTransactions",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~validateTransactions",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": "{validateTransactions}",
    "description": "validate transactions list for current block",
    "lineNumber": 51,
    "params": [
      {
        "nullable": null,
        "types": [
          "array"
        ],
        "spread": false,
        "optional": false,
        "name": "transactions",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "unspent",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 165,
    "kind": "function",
    "name": "newTransaction",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~newTransaction",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": null,
    "description": "Create transaction",
    "lineNumber": 67,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "inputs",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "outputs",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "reward",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "{id: string, reward: boolean, inputs: *, outputs: *, hash: string}"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 166,
    "kind": "function",
    "name": "consensusSubsidy",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~consensusSubsidy",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 80,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "height",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 167,
    "kind": "function",
    "name": "createRewardTransaction",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~createRewardTransaction",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": "{createRewardTransaction}",
    "description": "Create reward transaction for block mining",
    "lineNumber": 96,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "address",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "id: string, reward: boolean, inputs: *, outputs: *, hash: string"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 168,
    "kind": "function",
    "name": "signHash",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~signHash",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": null,
    "description": "Sign transactionHash woth privateKey",
    "lineNumber": 103,
    "params": [
      {
        "name": "hash",
        "types": [
          "*"
        ]
      },
      {
        "name": "privateKey",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 169,
    "kind": "function",
    "name": "verifySignature",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~verifySignature",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 107,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "address",
        "types": [
          "*"
        ]
      },
      {
        "name": "signature",
        "types": [
          "*"
        ]
      },
      {
        "name": "hash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 170,
    "kind": "function",
    "name": "createInput",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~createInput",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": null,
    "description": "Create and sign input",
    "lineNumber": 120,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "transaction",
        "description": "Based on transaction id"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": "Based on transaction output index"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "amount",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "wallet",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "transaction, index, amount, address"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 171,
    "kind": "function",
    "name": "buildTransaction",
    "memberof": "src/lib/transaction.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/transaction.js~buildTransaction",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/transaction.js",
    "importStyle": null,
    "description": "Create a transaction",
    "lineNumber": 141,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "wallet",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "toAddress",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "amount",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "unspent",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "id, reward, inputs, outputs, hash,"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 172,
    "kind": "file",
    "name": "src/lib/wallet.js",
    "content": "// import\nimport { encrypt, decrypt } from 'crypto-io-utils';\nimport bitcoin from 'bitcoinjs-lib';\nimport randomBytes from 'randombytes';\nimport bs58 from 'bs58';\nimport networks from './networks.js';\n// declare\nconst { ECPair } = bitcoin;\nconst { encode, decode } = bs58;\n\nexport class CryptoWallet {\n\tconstructor(network) {\n\t\tif (network) {\n\t\t\tthis.network = network;\n\t\t} else {\n\t\t\tthis.network = 'olivia'; // harcoded to our testnet for now\n\t\t}\n\t}\n\n\tset network(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tvalue = networks[value];\n\t\t}\n\t\tthis._network = value;\n\t}\n\n\tget network() {\n\t\treturn this._network;\n\t}\n\n\tget _jsonWallet() {\n\t\treturn JSON.stringify({\n\t\t\twif: this.wif,\n\t\t\taddress: this.address\n\t\t});\n\t}\n\n\tset private(value) {\n\t\tif (value) {\n\t\t\tObject.defineProperty(this, '_private', {\n\t\t\t\tconfigurable: false,\n\t\t\t\twritable: false,\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\n\t}\n\n\tget private() {\n\t\tif (!this._private && this.wif) {\n\t\t\tthis.private = decode(this.wif).toString('hex'); // decode the wif with base58\n\t\t} else if (!this._private && !this.wif) {\n\t\t\tthrow new Error('Invalid wallet: missing wif or private key');\n\t\t}\n\t\treturn this._private;\n\t}\n\n\tset address(value) {\n\t\tif (value) {\n\t\t\tObject.defineProperty(this, '_address', {\n\t\t\t\tconfigurable: false,\n\t\t\t\twritable: false,\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\t}\n\n\tget address() {\n\t\tif (!this._address && this.wif) {\n\t\t\tthis.address = ECPair.fromWIF(this.wif, this.network).getAddress();\n\t\t} else if (!this._address && !this.wif) {\n\t\t\tthrow new Error('Invalid wallet: missing wif or address key');\n\t\t}\n\t\treturn this._address;\n\t}\n\n\tget public() {\n\t\treturn this.address;\n\t}\n\n\tlock(secret) {\n\t\treturn encrypt(this._jsonWallet, secret)\n      .then(cipher => this._cipher = cipher);\n\t}\n\n\tunlock(secret) {\n\t\treturn decrypt(this._cipher, secret).then(data => JSON.parse(data));\n\t}\n\n  /**\n   * @return {object} {wif, address}\n   */\n\t_updateKeyPair(keyPair) {\n\t\tthis.wif = keyPair.toWIF(); // private key in wif format\n\t\tthis.address = keyPair.getAddress(); // public key\n\t\treturn { wif: this.wif, address: this.address };\n\t}\n\n  /**\n   * Create new address using randomBytes\n   */\n\t_createRandomAddress() {\n\t\tconst keyPair = ECPair.makeRandom({\n\t\t\tnetwork: this.network,\n\t\t\trng: () => Buffer.from(randomBytes(32))\n\t\t});\n\n\t\treturn this._updateKeyPair(keyPair);\n\t}\n\n\t_createAddressFromHash(hash) {\n\t\tif (!hash) {\n\t\t\treturn console.warn('SHA256 hash required');\n\t\t}\n\t\tconst big = bigi.fromBuffer(hash);\n\t\tconst keyPair = new ECPair(big);\n\n\t\treturn this._updateKeyPair(keyPair);\n\t}\n\n  /**\n   * Create a new address\n   * Returns a random address when hash is undefined.\n   *\n   * @param {*} hash SHA256 hash to generate an address from.\n   */\n\tnew(hash) {\n\t\tif (hash) {\n\t\t\treturn this._createAddressFromHash(hash);\n\t\t}\n\t\treturn this._createRandomAddress();\n\t}\n\n  /**\n   * Get the address using the wif (wallet import format)\n   *\n   * @param {*} wif The wif address to generate the public key from.\n   *\n   * **The wif is also set for generating the private key when sending coins.**\n   */\n\timport(wif) {\n\t\tthis.wif = wif;\n\t\tthis.address = ECPair.fromWIF(wif, this.network).getAddress();\n\t}\n\n  /**\n   * Send coins to given address\n   *\n   * @param {*} address The address to send the coins to.\n   *\n   * Will move to other module probably.\n   */\n\tsend() {\n\t\tif (this.private && this.address) {\n      // TODO: finish ...\n\t\t} else {\n\t\t\tthrow new Error('Invalid wallet: you should check you address and private key');\n\t\t}\n    // createTransaction\n\t}\n\n  /**\n   * Send coins to given address\n   *\n   * @param {*} address The address to send the coins to.\n   *\n   * Will move to other module probably.\n   */\n\treceive() {\n\t\tif (!this.private && this.wif) {\n\t\t\tthis.private = decode(this.wif).toString('hex'); // decode the wif with base58\n\t\t} else if (this.private && this.public) {\n      // TODO: finish ...\n\t\t} else {\n\t\t\tthrow new Error('Invalid wallet: you should check you address and private key');\n\t\t}\n    // createTransaction\n\t}\n}\nexport default CryptoWallet;\n",
    "static": true,
    "longname": "src/lib/wallet.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 173,
    "kind": "variable",
    "name": "ECPair",
    "memberof": "src/lib/wallet.js",
    "static": true,
    "longname": "src/lib/wallet.js~ECPair",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/wallet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 174,
    "kind": "variable",
    "name": "encode",
    "memberof": "src/lib/wallet.js",
    "static": true,
    "longname": "src/lib/wallet.js~encode",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/wallet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 175,
    "kind": "class",
    "name": "CryptoWallet",
    "memberof": "src/lib/wallet.js",
    "static": true,
    "longname": "src/lib/wallet.js~CryptoWallet",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/lib/wallet.js",
    "importStyle": "{CryptoWallet}",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false
  },
  {
    "__docId__": 176,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#constructor",
    "access": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "network",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 177,
    "kind": "member",
    "name": "network",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#network",
    "access": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 178,
    "kind": "member",
    "name": "network",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#network",
    "access": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 179,
    "kind": "set",
    "name": "network",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#network",
    "access": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 180,
    "kind": "member",
    "name": "_network",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#_network",
    "access": null,
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 181,
    "kind": "get",
    "name": "network",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#network",
    "access": null,
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 182,
    "kind": "get",
    "name": "_jsonWallet",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#_jsonWallet",
    "access": null,
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 183,
    "kind": "set",
    "name": "private",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#private",
    "access": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 184,
    "kind": "get",
    "name": "private",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#private",
    "access": null,
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 185,
    "kind": "member",
    "name": "private",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#private",
    "access": null,
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 186,
    "kind": "set",
    "name": "address",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#address",
    "access": null,
    "description": null,
    "lineNumber": 58,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 187,
    "kind": "get",
    "name": "address",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#address",
    "access": null,
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 188,
    "kind": "member",
    "name": "address",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#address",
    "access": null,
    "description": null,
    "lineNumber": 70,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 189,
    "kind": "get",
    "name": "public",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#public",
    "access": null,
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 190,
    "kind": "method",
    "name": "lock",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#lock",
    "access": null,
    "description": null,
    "lineNumber": 81,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "secret",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 191,
    "kind": "method",
    "name": "unlock",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#unlock",
    "access": null,
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "secret",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 192,
    "kind": "method",
    "name": "_updateKeyPair",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#_updateKeyPair",
    "access": null,
    "description": "",
    "lineNumber": 93,
    "params": [
      {
        "name": "keyPair",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "object"
      ],
      "spread": false,
      "description": "{wif, address}"
    }
  },
  {
    "__docId__": 193,
    "kind": "member",
    "name": "wif",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#wif",
    "access": null,
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 194,
    "kind": "member",
    "name": "address",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#address",
    "access": null,
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 195,
    "kind": "method",
    "name": "_createRandomAddress",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#_createRandomAddress",
    "access": null,
    "description": "Create new address using randomBytes",
    "lineNumber": 102,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 196,
    "kind": "method",
    "name": "_createAddressFromHash",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#_createAddressFromHash",
    "access": null,
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "hash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 197,
    "kind": "method",
    "name": "new",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#new",
    "access": null,
    "description": "Create a new address\nReturns a random address when hash is undefined.",
    "lineNumber": 127,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "hash",
        "description": "SHA256 hash to generate an address from."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 198,
    "kind": "method",
    "name": "import",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#import",
    "access": null,
    "description": "Get the address using the wif (wallet import format)",
    "lineNumber": 141,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "wif",
        "description": "The wif address to generate the public key from.\n\n**The wif is also set for generating the private key when sending coins.**"
      }
    ]
  },
  {
    "__docId__": 199,
    "kind": "member",
    "name": "wif",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#wif",
    "access": null,
    "description": null,
    "lineNumber": 142,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 200,
    "kind": "member",
    "name": "address",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#address",
    "access": null,
    "description": null,
    "lineNumber": 143,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 201,
    "kind": "method",
    "name": "send",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#send",
    "access": null,
    "description": "Send coins to given address",
    "lineNumber": 153,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "address",
        "description": "The address to send the coins to.\n\nWill move to other module probably."
      }
    ]
  },
  {
    "__docId__": 202,
    "kind": "method",
    "name": "receive",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#receive",
    "access": null,
    "description": "Send coins to given address",
    "lineNumber": 169,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "address",
        "description": "The address to send the coins to.\n\nWill move to other module probably."
      }
    ]
  },
  {
    "__docId__": 203,
    "kind": "member",
    "name": "private",
    "memberof": "src/lib/wallet.js~CryptoWallet",
    "static": false,
    "longname": "src/lib/wallet.js~CryptoWallet#private",
    "access": null,
    "description": null,
    "lineNumber": 171,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 204,
    "kind": "file",
    "name": "src/lib/workers/miner-worker.js",
    "content": "import { calculateHash } from './../dagchain/dagblock';\nimport { getDifficulty } from '../../utils';\n\nconst hashes = nonce => {\n\tconst hashrates = [10000];\n\tfor (let i = hashrates.length; i-- > 0;) {\n\t\tif (nonce % hashrates[i - 1] === 0) return hashrates[i - 1];\n\t}\n\treturn hashrates.filter(hashrate => {\n\t\tif (nonce % hashrate === 0) return hashrate;\n\t});\n};\n\nexport default (() => {\n\tprocess.on('message', async ({block, difficulty}) => {\n  \tconst stop = () => resolve(null);\n  \tlet hashCount = 0;\n\t\tblock.hash = await calculateHash(block);\n  \twhile (getDifficulty(block.hash) >= difficulty) {\n  \t\tblock.nonce++;\n  \t\tblock.hash = await calculateHash(block);\n  \t\thashCount = hashCount + Number(hashes(block.nonce));\n  \t}\n  \tprocess.send({ block, hashCount });\n\t});\n\n})();\n",
    "static": true,
    "longname": "src/lib/workers/miner-worker.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 205,
    "kind": "function",
    "name": "hashes",
    "memberof": "src/lib/workers/miner-worker.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/lib/workers/miner-worker.js~hashes",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/lib/workers/miner-worker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "nonce",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 206,
    "kind": "file",
    "name": "src/params.js",
    "content": "import { join } from 'path';\r\nimport { homedir } from 'os';\r\nimport { decode, encode } from 'bs58';\r\nimport { read } from 'crypto-io-fs';\nimport { keccak } from 'leofcoin-hash';\nconst argv = process.argv;\n\nexport const networks = {\n\t'leofcoin': join(homedir(), '.leofcoin'),\n\t'olivia': join(homedir(), '.leofcoin/olivia')\n};\n\nexport const network = (() => {\n  const index = argv.indexOf('--network');\n  return process.env.NETWORK || (index > -1) ? argv[index + 1] : 'leofcoin';\n})()\n\nexport const verbose = Boolean([\n  argv.indexOf('-v'),\n  argv.indexOf('--verbose'),\n  process.env.VERBOSE ? 1 : -1\n].reduce((p, c) => {\n  if (c > p) return c;\n  return Number(p)\n}, -1) >= 0);\n\r\nexport const olivia = process.argv.includes('olivia') || process.argv.includes('testnet');\r\nexport const genesis = process.argv.includes('genesis');\r\nexport const AppData = join(homedir(), 'AppData', 'Roaming', 'Leofcoin');\r\nconst netHash = net => encode(keccak(Buffer.from(`${net}-`), 256)).slice(0, 24);\n\nexport const mainNethash = netHash('leofcoin');\n\n/**\n * returns the hash for a subnet, prefixed with mainNethash\n */\nconst subnetHash = net => {\n  const prefix = mainNethash.slice(0, 4);\n  const hash = netHash(net);\n  return `${prefix}${hash.slice(4, hash.length)}`\n}\nexport const testNethash = subnetHash('olivia');\n\nexport const netPrefix = (() => network === 'leofcoin' ? mainNethash : testNethash)()\nexport const signalServers = (() => {\n  if (network === 'olivia') return [\n    '/ip4/162.208.10.171/tcp/4002/ipfs/QmNwuenPwwVKuQRHksR4YHtWS91n5PoyqyK3Focbm1uU4d'\n  ]\n  else return [\n    '/ip4/162.208.10.171/tcp/4002/ipfs/QmXWTPiAg52FH87p7nVMcJVmMUzmLVLRDpT1yh1apb9xKr'\n  ]\n})()\n\nexport const netKeys = {\n  olivia: `/key/swarm/psk/1.0.0/\n  /base16/\n  b37e0b6f3574931ce7a0ef863f64b0f01ba111bb7fabb6a661fc67b51b4ddd15`,\n  leofcoin: `/key/swarm/psk/1.0.0/\n  /base16/\n  0b78a0dcb430dd77311ab6629aa6b75fa05c6779a567dcc176b2299853e6f746`\n}\r\n\nexport const netKey = netKeys[network];\r\nexport const networkPath = networks[network];\r\nexport const netKeyPath = join(networkPath, 'swarm.key');\r\nexport const localCurrent = join(networkPath, 'db', 'current');\r\nexport const localIndex = join(networkPath, 'db', 'index');\r\nexport const localDAGAddress = join(networkPath, 'db', 'dag.multiaddress');\r\n// export const\r\n// TODO: remove seed once we have a static ip for our ipfs daemon node\r\n// untill seed is removed we retrieve the keys using socket.io\r\n// TODO: make AppData overwriteable\r\nexport const seed = 'https://septimal-balinese-2547.dataplicity.io';\r\nexport const seeds = 'QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n';\r\nexport const configPath = join(AppData, 'core.config');\r\nexport const reward = 150;\r\nexport const consensusSubsidyInterval = 52500;\r\nexport const consensusSubsidyPercentage = 12.5; // quarterlings\r\nexport const genesisCID = '1220000026e43a85c01ab04183ecce485637ac15d7423bea5fd0a72019da9afe2936'; // // TODO: should be hardcoded\r\n\r\nexport const GENESISBS58 = 'uVd8DSSuJkh8P8WbMsUTknyidJV8V8eUBL8Pg8ijHbgQBnkjDVrKky5EWD19F3vY9uApjMkb47oah95qDrYXWqNbJzLKAWFaxdCmcjGFv';\r\nexport const GENESISBLOCK = (() => {\r\n\tconst block = JSON.parse(Buffer.from(decode(GENESISBS58)).toString());\r\n\tblock.hash = genesisCID.substring(4);\r\n\treturn block;\r\n})();\r\nexport const localDAGMultiaddress = async () => {\n  try {\n    const address = await read(localDAGAddress, 'string')\n    return address;\n  } catch (e) {\n    console.warn(`initial run::${e}`)\n  }\n};\n\r\nexport const checkpoints = [\r\n];\r\n\r\nexport default {\r\n\tseed,\r\n\tAppData,\r\n\tconfigPath,\r\n\tlocalCurrent,\r\n\tlocalIndex,\r\n\treward,\r\n\tconsensusSubsidyInterval,\r\n\tconsensusSubsidyPercentage\r\n};\r\n",
    "static": true,
    "longname": "src/params.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 207,
    "kind": "variable",
    "name": "argv",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~argv",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 208,
    "kind": "variable",
    "name": "networks",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~networks",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{networks}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"leofcoin\": *, \"olivia\": *}"
      ]
    }
  },
  {
    "__docId__": 209,
    "kind": "variable",
    "name": "network",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~network",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{network}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 210,
    "kind": "variable",
    "name": "verbose",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~verbose",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{verbose}",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 211,
    "kind": "variable",
    "name": "olivia",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~olivia",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{olivia}",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 212,
    "kind": "variable",
    "name": "genesis",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~genesis",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{genesis}",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 213,
    "kind": "variable",
    "name": "AppData",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~AppData",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{AppData}",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 214,
    "kind": "function",
    "name": "netHash",
    "memberof": "src/params.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/params.js~netHash",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "net",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 215,
    "kind": "variable",
    "name": "mainNethash",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~mainNethash",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{mainNethash}",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 216,
    "kind": "function",
    "name": "subnetHash",
    "memberof": "src/params.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/params.js~subnetHash",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": null,
    "description": "returns the hash for a subnet, prefixed with mainNethash",
    "lineNumber": 37,
    "params": [
      {
        "name": "net",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 217,
    "kind": "variable",
    "name": "testNethash",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~testNethash",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{testNethash}",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 218,
    "kind": "variable",
    "name": "netPrefix",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~netPrefix",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{netPrefix}",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 219,
    "kind": "variable",
    "name": "signalServers",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~signalServers",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{signalServers}",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 220,
    "kind": "variable",
    "name": "netKeys",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~netKeys",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{netKeys}",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"olivia\": *, \"leofcoin\": *}"
      ]
    }
  },
  {
    "__docId__": 221,
    "kind": "variable",
    "name": "netKey",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~netKey",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{netKey}",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 222,
    "kind": "variable",
    "name": "networkPath",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~networkPath",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{networkPath}",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 223,
    "kind": "variable",
    "name": "netKeyPath",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~netKeyPath",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{netKeyPath}",
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 224,
    "kind": "variable",
    "name": "localCurrent",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~localCurrent",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{localCurrent}",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 225,
    "kind": "variable",
    "name": "localIndex",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~localIndex",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{localIndex}",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 226,
    "kind": "variable",
    "name": "localDAGAddress",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~localDAGAddress",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{localDAGAddress}",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 227,
    "kind": "variable",
    "name": "seed",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~seed",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{seed}",
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 228,
    "kind": "variable",
    "name": "seeds",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~seeds",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{seeds}",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 229,
    "kind": "variable",
    "name": "configPath",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~configPath",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{configPath}",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 230,
    "kind": "variable",
    "name": "reward",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~reward",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{reward}",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 231,
    "kind": "variable",
    "name": "consensusSubsidyInterval",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~consensusSubsidyInterval",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{consensusSubsidyInterval}",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 232,
    "kind": "variable",
    "name": "consensusSubsidyPercentage",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~consensusSubsidyPercentage",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{consensusSubsidyPercentage}",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 233,
    "kind": "variable",
    "name": "genesisCID",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~genesisCID",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{genesisCID}",
    "description": null,
    "lineNumber": 79,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 234,
    "kind": "variable",
    "name": "GENESISBS58",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~GENESISBS58",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{GENESISBS58}",
    "description": null,
    "lineNumber": 81,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 235,
    "kind": "variable",
    "name": "GENESISBLOCK",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~GENESISBLOCK",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{GENESISBLOCK}",
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 236,
    "kind": "function",
    "name": "localDAGMultiaddress",
    "memberof": "src/params.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/params.js~localDAGMultiaddress",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{localDAGMultiaddress}",
    "description": null,
    "lineNumber": 87,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 237,
    "kind": "variable",
    "name": "checkpoints",
    "memberof": "src/params.js",
    "static": true,
    "longname": "src/params.js~checkpoints",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/params.js",
    "importStyle": "{checkpoints}",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 238,
    "kind": "file",
    "name": "src/server/core-requests.js",
    "content": "import { read } from 'crypto-io-fs';\r\nimport params from '../params';\r\nimport bus from '../lib/bus';\r\nimport Miner from '../lib/miner';\r\nconst { configPath } = params;\r\nclass CoreRequestError {\r\n  constructor(message) {\r\n    throw `core-requests-error::${message}`;\r\n  }\r\n}\r\n\r\nconst readForResponse = (path, format) => new Promise(async (resolve, reject) => {\r\n  const response = {};\r\n  try {\r\n    response.data = await read(path, format);\r\n    response.status = 200;\r\n  } catch (error) {\r\n    response.status(409).send(error)\r\n  }\r\n  resolve(response);\r\n});\r\n\r\nconst writeForResponse = (path, data) => new Promise(async (resolve, reject) => {\r\n  const response = {};\r\n  try {\r\n    await write(path, JSON.stringify(data));\r\n    response.status = 200;\r\n  } catch (error) {\r\n    response.status(409).send(error)\r\n  }\r\n  resolve(response);\r\n});\r\n\r\nconst miners = [];\r\n\r\nconst handleMinerRequest = async ({name, params}) => {\r\n  const response = {status: 409, data: null};\r\n\r\n  try {\r\n    switch (name) {\r\n      case 'config':\r\n        response.data = await read(configPath, 'json');\r\n        response.data = response.data.miner;\r\n        response.status = 200;\r\n        break;\r\n      case 'mine':\r\n        const { address, intensity } = params;\r\n        const addMiner = count => {\r\n          for (var i = 0; i < count; i++) {\r\n            miners.push(new Miner(address));\r\n          }\r\n        }\r\n        if (!intensity) {\r\n          intensity = 1;\r\n        }\r\n        if (!address) return console.warn('address undefined');\r\n        if (params.mining) {\r\n          if (miners.length > 0 && miners.length === intensity) {\r\n            miners.forEach(miner => {\r\n              miner.address = address;\r\n            });\r\n          } else if (miners.length > intensity) {\r\n            const removeCount = miners.length - intensity\r\n            miners.slice(0, removeCount);\r\n          } else if (miners.length < intensity && miners.length > 0) {\r\n            const addCount = intensity - miners.length;\r\n            addMiner(addCount);\r\n          } else {\r\n            addMiner(intensity);\r\n          }\r\n\r\n          if (!miners.mining) {\r\n            miners.forEach(miner => {\r\n              miner.start();\r\n            });\r\n            miners.mining = true;\r\n            global.states.mining = true\r\n            bus.emit('mining', true);\r\n          }\r\n        } else {\r\n          miners.forEach(miner => {\r\n            miner.stop();\r\n          });\r\n          miners.mining = false;\r\n          global.states.mining = false\r\n          bus.emit('mining', false);\r\n        }\r\n        break;\r\n      case 'address':\r\n        if (set) {\r\n          response = await readForResponse(configPath, 'json');\r\n          if (response.data.miner.address !== address) {\r\n            response.data.miner.address = address;\r\n            response = await writeForResponse(configPath, response.data);\r\n          }\r\n        } else if (get) {\r\n          response = await readForResponse(params.configPath, 'json');\r\n          response.data = response.data.miner.address;\r\n        } else {\r\n          response.status(409).send('set or get wanted for @miner/address');\r\n        }\r\n        break;\r\n    }\r\n    return response;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nconst handleStatusRequest = async ({name, params}) => {\r\n  const response = {status: 409, data: null};\r\n  // get state from the global states object\r\n  const state = global.states[name];\r\n  if (typeof state === 'boolean') {\r\n    response.data = state;\r\n    response.status = 200;\r\n  }\r\n  return response;\r\n}\n\nconst handleBlockRequest = async ({name, params}) => {\n  const response = {status: 409, data: null};\n  // get state from the global states object\n  switch (name) {\n    case 'get':\n\n      break;\n    default:\n\n  }\n  if (typeof state === 'boolean') {\n    response.data = state;\n    response.status = 200;\n  }\n  return response;\n}\r\n\r\nexport default async ({type, name, params}) => {\r\n  switch (type) {\r\n    case 'miner':\r\n      return handleMinerRequest({name, params});\r\n      break;\r\n    case 'status':\r\n      return handleStatusRequest({name, params});\r\n      break;\n      case 'chain':\n      return handleBlockRequest({name, params});\n    break;\r\n  }\r\n}\r\n",
    "static": true,
    "longname": "src/server/core-requests.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 239,
    "kind": "variable",
    "name": "configPath",
    "memberof": "src/server/core-requests.js",
    "static": true,
    "longname": "src/server/core-requests.js~configPath",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 240,
    "kind": "class",
    "name": "CoreRequestError",
    "memberof": "src/server/core-requests.js",
    "static": true,
    "longname": "src/server/core-requests.js~CoreRequestError",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false
  },
  {
    "__docId__": 241,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/server/core-requests.js~CoreRequestError",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/core-requests.js~CoreRequestError#constructor",
    "access": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "message",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 242,
    "kind": "function",
    "name": "readForResponse",
    "memberof": "src/server/core-requests.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/server/core-requests.js~readForResponse",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "format",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 243,
    "kind": "function",
    "name": "writeForResponse",
    "memberof": "src/server/core-requests.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/server/core-requests.js~writeForResponse",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 244,
    "kind": "variable",
    "name": "miners",
    "memberof": "src/server/core-requests.js",
    "static": true,
    "longname": "src/server/core-requests.js~miners",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 245,
    "kind": "function",
    "name": "handleMinerRequest",
    "memberof": "src/server/core-requests.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/server/core-requests.js~handleMinerRequest",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"name\": *, \"params\": *}"
        ],
        "defaultRaw": {
          "name": null,
          "params": null
        },
        "defaultValue": "{\"name\":null,\"params\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 246,
    "kind": "function",
    "name": "handleStatusRequest",
    "memberof": "src/server/core-requests.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/server/core-requests.js~handleStatusRequest",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 110,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"name\": *, \"params\": *}"
        ],
        "defaultRaw": {
          "name": null,
          "params": null
        },
        "defaultValue": "{\"name\":null,\"params\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 247,
    "kind": "function",
    "name": "handleBlockRequest",
    "memberof": "src/server/core-requests.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/server/core-requests.js~handleBlockRequest",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"name\": *, \"params\": *}"
        ],
        "defaultRaw": {
          "name": null,
          "params": null
        },
        "defaultValue": "{\"name\":null,\"params\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 248,
    "kind": "function",
    "name": "corerequests",
    "memberof": "src/server/core-requests.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/server/core-requests.js~corerequests",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/server/core-requests.js",
    "importStyle": "corerequests",
    "description": null,
    "lineNumber": 138,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"type\": *, \"name\": *, \"params\": *}"
        ],
        "defaultRaw": {
          "type": null,
          "name": null,
          "params": null
        },
        "defaultValue": "{\"type\":null,\"name\":null,\"params\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 249,
    "kind": "file",
    "name": "src/server/index.js",
    "content": "import express from 'express';\nimport cors from 'cors';\nimport { Server, createServer } from 'http';\nimport { read } from 'crypto-io-fs';\nimport { encrypt, decrypt } from 'crypto-io-utils';\nimport params from './../params';\nimport wallet from './routes/wallet';\nimport socketServer from './socket-server';\nimport { chain } from '../lib/dagchain/dagchain-interface';\n// internal server for communicating with system fs\nconst core = express();\nconst server = Server(core);\n// socket event server\nsocketServer(server);\n\ncore.use(cors({\n\torigin: 'http://127.0.0.1:2050'\n}));\n\n// setup routes\ncore.use(wallet);\n\ncore.get('/core/chain', (request, response) => {\n\tresponse.status(200).send(JSON.stringify(chain));\n});\n\nserver.listen(5005, console.log('listening on 5005'));\n",
    "static": true,
    "longname": "src/server/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 250,
    "kind": "variable",
    "name": "core",
    "memberof": "src/server/index.js",
    "static": true,
    "longname": "src/server/index.js~core",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 251,
    "kind": "variable",
    "name": "server",
    "memberof": "src/server/index.js",
    "static": true,
    "longname": "src/server/index.js~server",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 252,
    "kind": "file",
    "name": "src/server/routes/wallet.js",
    "content": "import { Router } from 'express';\r\nimport { join } from 'path';\r\nimport { homedir } from 'os';\r\nimport { read, write } from 'crypto-io-fs';\r\nimport { CryptoWallet } from '../../lib/wallet';\r\nimport { getBalanceForAddress } from './../../lib/dagchain/dagchain-interface';\r\nimport { debug } from '../../utils';\r\n\r\nconst router = Router();\r\n\r\nconst APPDATAPATH = (() => {\r\n  switch (process.platform) {\r\n    case 'win32':\r\n      return join(homedir(), 'AppData', 'Roaming', 'Leofcoin')\r\n      break;\r\n    case 'linux':\r\n      return join(homedir(), '.leofcoin')\r\n      break;\r\n    case 'darwin':\r\n      // TODO: implement darwin path\r\n      break;\r\n    case 'android':\r\n      // TODO: implement android path\r\n      // experimental\r\n      break;\r\n  }\r\n})();\n\r\n// TODO: encrypt/decrypt\r\nrouter.get('/core/new-wallet', async (request, response) => {\r\n  try {\r\n    await read(join(APPDATAPATH, 'wallet.dat'));\r\n    return response.status(302).send('Already Exists')\r\n  } catch (error) {\r\n    debug('No wallet found, making new wallet.')\r\n    const name = request.query.name || 'main';\r\n    const wallet = new CryptoWallet();\r\n    wallet.new();\r\n    const addresses = JSON.stringify([[name, wallet.public]]);\r\n    response.status(200).send(addresses);\r\n    await write(join(APPDATAPATH, 'wallet.dat'), JSON.stringify([\r\n      [name, {private: wallet.private, public: wallet.public}]\r\n    ]));\r\n    await write(join(APPDATAPATH, 'addresses.dat'), addresses);\r\n  }\r\n\r\n});\r\n\r\nrouter.get('/core/wallet', async (request, response) => {\r\n  try {\r\n    const wallet = await read(join(APPDATAPATH, 'wallet.dat'), 'json');\r\n    response.status(200).send(wallet)\r\n  } catch (error) {\r\n    if (error.code === 'ENOENT') {\r\n      return response.redirect('/core/new-wallet');\r\n    }\r\n    response.status(409).send(error);\r\n  }\r\n});\r\n\r\nrouter.get('/core/new-address', async (request, response) => {\r\n  const name = request.query.name || 'main';\r\n  const wallet = new CryptoWallet();\r\n  wallet.new();\r\n  const walletAddresses = await read(join(APPDATAPATH, 'wallet.dat'), 'json');\r\n  const addresses = await read(join(APPDATAPATH, 'addresses.dat'), 'json');\r\n  const address = [name, wallet.public];\r\n  addresses.push(address);\r\n  walletAddresses.push([name, {private: wallet.private, public: wallet.public}])\r\n  response.status(200).send(JSON.stringify(address));\r\n  await write(join(APPDATAPATH, 'wallet.dat'), JSON.stringify(walletAddresses));\r\n  await write(join(APPDATAPATH, 'addresses.dat'), JSON.stringify(addresses));\r\n});\r\n\r\nrouter.get('/core/addresses', async (request, response) => {\r\n  try {\r\n    const addresses = await read(join(APPDATAPATH, 'addresses.dat'), 'buffer');\r\n    response.status(200).send(addresses);\r\n  } catch (error) {\r\n    if (error.code === 'ENOENT') {\r\n      return response.redirect('/core/new-wallet');\r\n    }\r\n    response.status(409).send(error);\r\n  }\r\n});\r\n\r\nrouter.get('/core/getbalance/:address', async (request, response) => {\r\n  try {\r\n    const balance = getBalanceForAddress(request.params.address);\r\n    response.status(200).send(String(balance))\r\n  } catch (error) {\r\n    response.status(409).send(error);\r\n  }\r\n});\r\n\r\nexport default router;\r\n",
    "static": true,
    "longname": "src/server/routes/wallet.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 253,
    "kind": "variable",
    "name": "APPDATAPATH",
    "memberof": "src/server/routes/wallet.js",
    "static": true,
    "longname": "src/server/routes/wallet.js~APPDATAPATH",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/server/routes/wallet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 254,
    "kind": "variable",
    "name": "router",
    "memberof": "src/server/routes/wallet.js",
    "static": true,
    "longname": "src/server/routes/wallet.js~router",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/server/routes/wallet.js",
    "importStyle": "router",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 255,
    "kind": "file",
    "name": "src/server/socket-server.js",
    "content": "import { server as WebSocketServer } from 'websocket';\nimport bus from '../lib/bus';\nimport coreRequests from './core-requests';\n// import http = from 'http';\n\nexport const clientResponse = ({type, name, data}, encoding = 'utf8') => {\n\tdata = {\n\t\tdata,\n\t\tstatus: 200\n\t};\n\tconst response = {\n\t\ttype,\n\t\tname,\n\t\tdata\n\t};\n\tif (encoding === 'utf8') {\n\t\treturn JSON.stringify(response);\n\t}\n\treturn response;\n};\n\nexport class ClientConnection {\n\tconstructor(connection) {\n\t\tthis.connection = connection;\n\n\t\tthis.onMessage = this.onMessage.bind(this);\n\t\tthis.onPeerAdded = this.onPeerAdded.bind(this);\n\t\tthis.onMining = this.onMining.bind(this);\n\t\tthis.onBlockAdded = this.onBlockAdded.bind(this);\n\t\tthis.onHashrate = this.onHashrate.bind(this);\n\t\tthis.onjobCancelled = this.onjobCancelled.bind(this);\n\t\tthis.onConnecting = this.onConnecting.bind(this);\n\t\tthis.onSyncing = this.onSyncing.bind(this);\n\t\tthis.onReady = this.onReady.bind(this);\n\n\t\tthis.connection.on('message', this.onMessage);\n\n\t\tbus.on('peer-added', this.onPeerAdded);\n\t\tbus.on('mining', this.onMining);\n  \tbus.on('block', this.onBlockAdded);\n  \tbus.on('hashrate', this.onHashrate);\n  \tbus.on('job-cancelled', this.onjobCancelled);\n  \tbus.on('connecting', this.onConnecting);\n  \tbus.on('syncing', this.onSyncing);\n\t\tbus.on('ready', this.onReady);\n\n  \tthis.connection.on('close', (reasonCode, description) => {\n\t\t\tbus.removeListener('peer-added', this.onPeerAdded);\n  \t\tbus.removeListener('mining', this.onMining);\n    \tbus.removeListener('block', this.onBlockAdded);\n    \tbus.removeListener('hashrate', this.onHashrate);\n    \tbus.removeListener('job-cancelled', this.onjobCancelled);\n    \tbus.removeListener('connecting', this.onConnecting);\n    \tbus.removeListener('syncing', this.onSyncing);\n  \t\tbus.removeListener('ready', this.onReady);\n  \t\tconsole.log((new Date()) + ' Peer ' + this.connection.remoteAddress + ' disconnected.');\n\t\t\treturn;\n  \t});\n\t}\n\n\tonMessage({type, utf8Data}) {\n\t\tif (type === 'utf8') {\n    \tconst request = JSON.parse(utf8Data.toString());\n\t\t\tcoreRequests(request).then(data => {\n\t\t\t\tconst { name, type } = request;\n\t\t\t\tthis.connection.send(JSON.stringify({name, data, type}));\n\t\t\t});\n\t\t}\n\t}\n\n\tsend({name, data, type}) {\n\t\tthis.connection.send(clientResponse({type, name, data}));\n\t}\n\n\tstateResponse({type = 'status', name, data}) {\n  \tif (data !== global.states[name]) {\n  \t\tglobal.states[name] = data;\n  \t}\n  \treturn this.send({type, name, data});\n\t}\n\n\tonPeerAdded(peer) {\n\t\tthis.send({type: 'network', name: 'peer-added'});\n\t}\n\n\tonMining(data) {\n\t\tthis.stateResponse({name: 'mining', data});\n\t}\n\n\tonBlockAdded(data) {\n  \tconsole.log(data.transactions);\n  \tthis.send({type: 'blockchain', name: 'block-added', data});\n\t}\n\n\tonHashrate(data) {\n\t\tthis.send({type: 'miner', name: 'hashrate', data});\n\t}\n\n\tonjobCancelled(data) {\n\t\tthis.send({type: 'miner', name: 'job-cancelled', data});\n\t}\n\n\tonConnecting(data) {\n\t\tthis.stateResponse({name: 'connecting', data});\n\t}\n\n\tonSyncing(data) {\n\t\tthis.stateResponse({name: 'syncing', data});\n\t}\n\n\tonReady(data) {\n\t\tthis.stateResponse({name: 'ready', data});\n\t}\n}\n\nexport default httpServer => {\n\tconst socketServer = new WebSocketServer({\n  \thttpServer,\n  \tautoAcceptConnections: false\n\t});\n\n\tconst originIsAllowed = origin => {\n  \t// put logic here to detect whether the specified origin is allowed.\n  \treturn true;\n\t};\n\n\tsocketServer.on('request', request => {\n  \tif (!originIsAllowed(request.origin)) {\n  \t\t// Make sure we only accept requests from an allowed origin\n  \t\trequest.reject();\n  \t\tconsole.log((new Date()) + ' Connection from origin ' + request.origin + ' rejected.');\n  \t\treturn;\n  \t}\n\n  \tconst connection = request.accept('echo-protocol', request.origin);\n  \tconsole.log((new Date()) + ' Connection accepted.');\n\t\treturn new ClientConnection(connection);\n\t});\n\n};\n",
    "static": true,
    "longname": "src/server/socket-server.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 256,
    "kind": "function",
    "name": "clientResponse",
    "memberof": "src/server/socket-server.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/server/socket-server.js~clientResponse",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/server/socket-server.js",
    "importStyle": "{clientResponse}",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"type\": *, \"name\": *, \"data\": *}"
        ],
        "defaultRaw": {
          "type": null,
          "name": null,
          "data": null
        },
        "defaultValue": "{\"type\":null,\"name\":null,\"data\":null}"
      },
      {
        "name": "encoding",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "utf8",
        "defaultValue": "utf8"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 257,
    "kind": "class",
    "name": "ClientConnection",
    "memberof": "src/server/socket-server.js",
    "static": true,
    "longname": "src/server/socket-server.js~ClientConnection",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/server/socket-server.js",
    "importStyle": "{ClientConnection}",
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "interface": false
  },
  {
    "__docId__": 258,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#constructor",
    "access": null,
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "connection",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 259,
    "kind": "member",
    "name": "connection",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#connection",
    "access": null,
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 260,
    "kind": "member",
    "name": "onMessage",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onMessage",
    "access": null,
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 261,
    "kind": "member",
    "name": "onPeerAdded",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onPeerAdded",
    "access": null,
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 262,
    "kind": "member",
    "name": "onMining",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onMining",
    "access": null,
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 263,
    "kind": "member",
    "name": "onBlockAdded",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onBlockAdded",
    "access": null,
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 264,
    "kind": "member",
    "name": "onHashrate",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onHashrate",
    "access": null,
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 265,
    "kind": "member",
    "name": "onjobCancelled",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onjobCancelled",
    "access": null,
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 266,
    "kind": "member",
    "name": "onConnecting",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onConnecting",
    "access": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 267,
    "kind": "member",
    "name": "onSyncing",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onSyncing",
    "access": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 268,
    "kind": "member",
    "name": "onReady",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onReady",
    "access": null,
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 269,
    "kind": "method",
    "name": "onMessage",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onMessage",
    "access": null,
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"type\": *, \"utf8Data\": *}"
        ],
        "defaultRaw": {
          "type": null,
          "utf8Data": null
        },
        "defaultValue": "{\"type\":null,\"utf8Data\":null}"
      }
    ]
  },
  {
    "__docId__": 270,
    "kind": "method",
    "name": "send",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#send",
    "access": null,
    "description": null,
    "lineNumber": 71,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"name\": *, \"data\": *, \"type\": *}"
        ],
        "defaultRaw": {
          "name": null,
          "data": null,
          "type": null
        },
        "defaultValue": "{\"name\":null,\"data\":null,\"type\":null}"
      }
    ]
  },
  {
    "__docId__": 271,
    "kind": "method",
    "name": "stateResponse",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#stateResponse",
    "access": null,
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"type\": *, \"name\": *, \"data\": *}"
        ],
        "defaultRaw": {
          "type": null,
          "name": null,
          "data": null
        },
        "defaultValue": "{\"type\":null,\"name\":null,\"data\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 272,
    "kind": "method",
    "name": "onPeerAdded",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onPeerAdded",
    "access": null,
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "peer",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 273,
    "kind": "method",
    "name": "onMining",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onMining",
    "access": null,
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 274,
    "kind": "method",
    "name": "onBlockAdded",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onBlockAdded",
    "access": null,
    "description": null,
    "lineNumber": 90,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 275,
    "kind": "method",
    "name": "onHashrate",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onHashrate",
    "access": null,
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 276,
    "kind": "method",
    "name": "onjobCancelled",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onjobCancelled",
    "access": null,
    "description": null,
    "lineNumber": 99,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 277,
    "kind": "method",
    "name": "onConnecting",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onConnecting",
    "access": null,
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 278,
    "kind": "method",
    "name": "onSyncing",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onSyncing",
    "access": null,
    "description": null,
    "lineNumber": 107,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 279,
    "kind": "method",
    "name": "onReady",
    "memberof": "src/server/socket-server.js~ClientConnection",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/server/socket-server.js~ClientConnection#onReady",
    "access": null,
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 280,
    "kind": "function",
    "name": "socketserver",
    "memberof": "src/server/socket-server.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/server/socket-server.js~socketserver",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/server/socket-server.js",
    "importStyle": "socketserver",
    "description": null,
    "lineNumber": 116,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "httpServer",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 281,
    "kind": "file",
    "name": "src/utils.js",
    "content": "'use strict';\r\nimport { read, write } from 'crypto-io-fs';\r\nimport { configPath, olivia, network } from './params';\r\nimport { encode } from 'bs58';\nimport CryptoWallet from './lib/wallet';\nimport chalk from 'chalk';\nimport { homedir } from 'os';\nimport { join } from 'path';\n\nif (process.platform === 'win32') {\n  const readLine = require('readline').createInterface({\n    input: process.stdin,\n    output: process.stdout\n  });\n\n  readLine.on('SIGINT', () => {\n    process.emit('SIGINT');\n  });\n};\n\nconst APPDATAPATH = (() => {\n  switch (process.platform) {\n    case 'win32':\n      return join(homedir(), 'AppData', 'Roaming', 'Leofcoin', olivia ? 'olivia' : '')\n      break;\n    case 'linux':\n      return join(homedir(), '.leofcoin', olivia ? 'olivia' : '')\n      break;\n    case 'darwin':\n      // TODO: implement darwin path\n      break;\n    case 'android':\n      // TODO: implement android path\n      // experimental\n      break;\n  }\n})();\n\r\n// hardcode debug param for now\r\nprocess.env.DEBUG = true;\r\nexport const debug = (text) => {\r\n\tif (process.env.DEBUG) {\r\n    const stack = new Error().stack;\r\n    const caller = stack.split('\\n')[2].trim();\n    console.groupCollapsed(chalk.blue(text));\n    console.log(caller)\n    console.groupEnd();\r\n  };\r\n};\n\nexport const log = text => {\n  console.log(chalk.cyan(text));\n}\n\nexport const succes = text => {\n  console.log(chalk.green(text));\n}\n\nexport const fail = text => {\n  console.log(chalk.red(text));\n}\n\nexport const groupCollapsed = (text, cb) => {\n  console.groupCollapsed(chalk.gray.bold(text));\n  cb();\n  console.groupEnd();\n}\r\n/**\r\n * Get hash difficulty\r\n *\r\n * @param hash\r\n * @return {Number}\r\n */\r\nexport const getDifficulty = hash => {\r\n\treturn parseInt(hash.substring(0, 8), 16);\r\n};\r\n\r\nexport const textlog = async text => {\r\n  let content = '';\r\n  try {\r\n    // content = await read('log');\r\n  } catch (e) {\r\n    console.log('creating new log file');\r\n  }\r\n\r\n  content += '\\n';\r\n  content += text;\r\n  return\r\n  // await write('log', content);\r\n};\r\n\r\nexport const timeout = (ms = 1000, cb) => {\r\n\tsetTimeout(() => {\r\n\t\tcb();\r\n\t}, ms);\r\n};\r\n\r\nexport const interval = (cb, ms = 1000) => {\r\n\tsetInterval(() => {\r\n\t\tcb();\r\n\t}, ms);\r\n};\r\n\r\nexport const hashes = nonce => {\r\n\tconst hashrates = [10, 100, 1000, 10000, 100000, 1000000, 1000000000, 1000000000000, 1000000000000000];\r\n\tfor (let i = hashrates.length; i-- > 0;) {\r\n\t\tif (nonce % hashrates[i - 1] === 0) return hashrates[i - 1];\r\n\t}\r\n\treturn hashrates.filter(hashrate => {\r\n\t\tif (nonce % hashrate === 0) return hashrate;\r\n\t});\r\n};\r\n\r\nexport const median = array => {\r\n  array.sort( function(a,b) {return a - b;} );\r\n\r\n  var half = Math.floor(array.length/2);\r\n\r\n  if(array.length % 2)\r\n    return array[half];\r\n  else\r\n    return (array[half-1] + array[half]) / 2.0;\r\n}\r\n\r\nlet previousDate = Date.now();\r\nlet previousMinuteDate = Date.now();\r\nlet hashCount = 0;\r\nlet timeoutRunning = false;\r\nlet rates = []\r\nexport const hashLog = nonce => {\r\n\tif (typeof(hashes(nonce)) === 'number') {\r\n\t\thashCount = hashCount + hashes(nonce);\r\n\t}\r\n  const now = Date.now()\r\n  // if (now - previousMinuteDate >= 60000) {\r\n    // previousMinuteDate = now;\r\n    // const middle = median(rates);\r\n  if (now - previousDate >= 1000) {\r\n    previousDate = now;\r\n    rates[hashCount]\r\n    hashCount = 0;\r\n    return rates;\r\n  }\r\n\r\n\r\n};\r\n\r\nexport const config = {\r\n\tserver: {\r\n\t\tport: 3030,\r\n\t\thost: 'localhost',\r\n\t},\r\n\tp2p: {\r\n\t\tport: 6001,\r\n\t\tpeers: [],\r\n\t},\r\n\treward: 150,\r\n\tpeers: []\r\n};\n\n\nexport const newWallet = ( name= 'main') => new Promise(async (resolve, reject) => {\n  try {\n    const wallet = new CryptoWallet(network);\n    wallet.new();\n    const addresses = JSON.stringify([[name, wallet.public]]);\n    await write(join(APPDATAPATH, 'wallet.dat'), JSON.stringify([\n      [name, {private: wallet.private, public: wallet.public}]\n    ]));\n    await write(join(APPDATAPATH, 'addresses.dat'), addresses);\n    resolve(wallet.public);\n  } catch (e) {\n    console.log(e);\n  } finally {\n  }\n})\n\n/**\n *\n */\nexport const createNewAddress = (name = Math.random().toString(36).slice(-8)) => new Promise(async (resolve, reject) => {\n  // create new address\n  const wallet = new CryptoWallet(network);\n  wallet.new()\n  // get local addresses\n  try {\n    const walletAddresses = await read(join(APPDATAPATH, 'wallet.dat'), 'json');\n    const addresses = await read(join(APPDATAPATH, 'addresses.dat'), 'json');\n    const address = [name, wallet.public];\n    addresses.push(address);\n    walletAddresses.push([name, {private: wallet.private, public: wallet.public}])\n    await write(join(APPDATAPATH, 'wallet.dat'), JSON.stringify(walletAddresses));\n    await write(join(APPDATAPATH, 'addresses.dat'), JSON.stringify(addresses));\n    resolve(wallet.public);\n  } catch (error) {\n    if (error.code === 'ENOENT') {\n      const n = await newWallet(name)\n      resolve(n)\n    }\n    else {reject(error)};\n  }\n});\r\n\r\nexport const networkAddress = async net => {\n  let address;\n  console.log(net);\r\n\tif (net === 'olivia') address = await createNewAddress('main');\n  else address = await createNewAddress('main');\n  return address;\t\r\n};\r\n\r\nexport const net = () => {\r\n\tconst testnet = 'olivia';\r\n\tconst main = 'leofcoin';\r\n\r\n\tif (process.argv[2] === testnet || process.argv[3] === testnet) {\r\n\t\treturn testnet;\r\n\t}\r\n\treturn main;\r\n};\r\n\r\nconst defaultConfig = async () => {\n  const address = await networkAddress(network)\n  console.log(address, 'address');\n\treturn {\n  \tminer: {\n  \t\taddress,\n  \t\tintensity: 1\n  \t}\n  }\n};\r\n\r\nexport const hexFromMultihash = multihash => {\r\n  return multihash.toString('hex').substring(4);\r\n}\r\n\r\nexport const multihashFromHex = hex => {\r\n  return encode(new Buffer(`1220${hex}`, 'hex'));\r\n}\r\n\r\n// TODO: also check for configfile in the directory where core is run from @AndrewVanardennen\r\n// search for the config file & create new one when needed\r\nexport const getUserConfig = new Promise(resolve => {\r\n\tread(configPath, 'json')\r\n    .then(config => resolve(config))\r\n\t\t.catch(async error => {\r\n\t\t\tif (error.code !== 'ENOENT') {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t}\r\n\t\t\tresolve(await defaultConfig());\r\n\t\t\tdebug('new config file created');\r\n\t\t});\r\n});\n\n/**\n * allow retry upto \"amount\" times\n * @param {number} amount\n */\nexport const allowFailureUntillEnough = (func, amount = 5) => new Promise(async (resolve, reject) => {\n  if (typeof func !== 'function') reject('function undefined');\n  if (typeof amount !== 'number') reject(`Expected amount to be a typeof Number`);\n  let count = 0;\n  for (var i = 0; i < amount; i++) {\n    try {\n      await func();\n      resolve();\n    } catch (error) {\n      if (amount === count) reject(error);\n    }\n  }\n});\r\n",
    "static": true,
    "longname": "src/utils.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 282,
    "kind": "variable",
    "name": "APPDATAPATH",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~APPDATAPATH",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 283,
    "kind": "function",
    "name": "debug",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~debug",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{debug}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 284,
    "kind": "function",
    "name": "log",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~log",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{log}",
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 285,
    "kind": "function",
    "name": "succes",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~succes",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{succes}",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 286,
    "kind": "function",
    "name": "fail",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~fail",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{fail}",
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 287,
    "kind": "function",
    "name": "groupCollapsed",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~groupCollapsed",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{groupCollapsed}",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 288,
    "kind": "function",
    "name": "getDifficulty",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~getDifficulty",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{getDifficulty}",
    "description": "Get hash difficulty",
    "lineNumber": 74,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "hash",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Number"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 289,
    "kind": "function",
    "name": "textlog",
    "memberof": "src/utils.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/utils.js~textlog",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{textlog}",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 290,
    "kind": "function",
    "name": "timeout",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~timeout",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{timeout}",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "ms",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1000,
        "defaultValue": "1000"
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 291,
    "kind": "function",
    "name": "interval",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~interval",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{interval}",
    "description": null,
    "lineNumber": 98,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      },
      {
        "name": "ms",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1000,
        "defaultValue": "1000"
      }
    ]
  },
  {
    "__docId__": 292,
    "kind": "function",
    "name": "hashes",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~hashes",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{hashes}",
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "nonce",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 293,
    "kind": "function",
    "name": "median",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~median",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{median}",
    "description": null,
    "lineNumber": 114,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "array",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 294,
    "kind": "variable",
    "name": "previousDate",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~previousDate",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 125,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 295,
    "kind": "variable",
    "name": "previousMinuteDate",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~previousMinuteDate",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 126,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 296,
    "kind": "variable",
    "name": "hashCount",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~hashCount",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 127,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 297,
    "kind": "variable",
    "name": "timeoutRunning",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~timeoutRunning",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 128,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 298,
    "kind": "variable",
    "name": "rates",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~rates",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 129,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 299,
    "kind": "function",
    "name": "hashLog",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~hashLog",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{hashLog}",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "nonce",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 300,
    "kind": "variable",
    "name": "config",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~config",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{config}",
    "description": null,
    "lineNumber": 148,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "{\"server\": *, \"p2p\": *, \"reward\": number, \"peers\": *}"
      ]
    }
  },
  {
    "__docId__": 301,
    "kind": "function",
    "name": "newWallet",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~newWallet",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{newWallet}",
    "description": null,
    "lineNumber": 162,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "name",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "main",
        "defaultValue": "main"
      }
    ]
  },
  {
    "__docId__": 302,
    "kind": "function",
    "name": "createNewAddress",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~createNewAddress",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{createNewAddress}",
    "description": "",
    "lineNumber": 181,
    "params": [
      {
        "name": "name",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 303,
    "kind": "function",
    "name": "networkAddress",
    "memberof": "src/utils.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/utils.js~networkAddress",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{networkAddress}",
    "description": null,
    "lineNumber": 204,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "net",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 304,
    "kind": "function",
    "name": "net",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~net",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{net}",
    "description": null,
    "lineNumber": 212,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 305,
    "kind": "function",
    "name": "defaultConfig",
    "memberof": "src/utils.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/utils.js~defaultConfig",
    "access": null,
    "export": false,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 222,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [],
    "return": {
      "types": [
        "{\"miner\": *}"
      ]
    }
  },
  {
    "__docId__": 306,
    "kind": "function",
    "name": "hexFromMultihash",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~hexFromMultihash",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{hexFromMultihash}",
    "description": null,
    "lineNumber": 233,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "multihash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 307,
    "kind": "function",
    "name": "multihashFromHex",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~multihashFromHex",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{multihashFromHex}",
    "description": null,
    "lineNumber": 237,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "name": "hex",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 308,
    "kind": "variable",
    "name": "getUserConfig",
    "memberof": "src/utils.js",
    "static": true,
    "longname": "src/utils.js~getUserConfig",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{getUserConfig}",
    "description": null,
    "lineNumber": 243,
    "undocument": true,
    "unknown": [
      {
        "tagName": "@_undocument",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "Promise"
      ]
    }
  },
  {
    "__docId__": 309,
    "kind": "function",
    "name": "allowFailureUntillEnough",
    "memberof": "src/utils.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils.js~allowFailureUntillEnough",
    "access": null,
    "export": true,
    "importPath": "leofcoin-core/src/utils.js",
    "importStyle": "{allowFailureUntillEnough}",
    "description": "allow retry upto \"amount\" times",
    "lineNumber": 259,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "amount",
        "description": ""
      }
    ]
  },
  {
    "__docId__": 311,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Infinity",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 312,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~NaN",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 313,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~undefined",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 314,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~null",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 315,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Object",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 316,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~object",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 317,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Function",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 318,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~function",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 319,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Boolean",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 320,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~boolean",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 321,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Symbol",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 322,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Error",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 323,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~EvalError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 324,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~InternalError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 325,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RangeError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 326,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ReferenceError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 327,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~SyntaxError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 328,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~TypeError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 329,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~URIError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 330,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Number",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 331,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~number",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 332,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Date",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 333,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~String",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 334,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~string",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 335,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RegExp",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 336,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 337,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int8Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 338,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 339,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8ClampedArray",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 340,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int16Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 341,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint16Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 342,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 343,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 344,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 345,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float64Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 346,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Map",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 347,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Set",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 348,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakMap",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 349,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakSet",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 350,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ArrayBuffer",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 351,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~DataView",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 352,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~JSON",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 353,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Promise",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 354,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Generator",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 355,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~GeneratorFunction",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 356,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Reflect",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 357,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "static": true,
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Proxy",
    "access": null,
    "description": "",
    "lineNumber": 193,
    "builtinExternal": true
  },
  {
    "__docId__": 359,
    "kind": "external",
    "name": "CanvasRenderingContext2D",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~CanvasRenderingContext2D",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 360,
    "kind": "external",
    "name": "DocumentFragment",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~DocumentFragment",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 361,
    "kind": "external",
    "name": "Element",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Element",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~Element",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 362,
    "kind": "external",
    "name": "Event",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Event",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~Event",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 363,
    "kind": "external",
    "name": "Node",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Node",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~Node",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 364,
    "kind": "external",
    "name": "NodeList",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/NodeList",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~NodeList",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 365,
    "kind": "external",
    "name": "XMLHttpRequest",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~XMLHttpRequest",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 366,
    "kind": "external",
    "name": "AudioContext",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/AudioContext",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "static": true,
    "longname": "BuiltinExternal/WebAPIExternal.js~AudioContext",
    "access": null,
    "description": "",
    "lineNumber": 34,
    "builtinExternal": true
  }
]